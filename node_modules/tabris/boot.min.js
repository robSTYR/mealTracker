"use strict";var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var FILE_POSTFIXES=["",".js",".json","/package.json","/index.js","/index.json"],FOLDER_POSTFIXES=["/package.json","/index.js","/index.json"],Module=function(){function e(t,r,n){_classCallCheck(this,e),this.id=t||null,this.parent=r||null;var i={},o=!1,a=this.require.bind(this);this._cache=this.parent?this.parent._cache:{},t&&(this._cache[t]=this),Object.defineProperty(this,"exports",{set:function(e){i=e},get:function(){return o||(o=!0,"function"==typeof n?n(this,i,a,t.slice(1),dirname(t).slice(1)):n instanceof Object&&(i=n)),i}})}return _createClass(e,[{key:"require",value:function(e){return"."!==e.slice(0,1)?this._cache[e]?this._cache[e].exports:findNodeModule.call(this,e).exports:findFileModule.call(this,e).exports}}],[{key:"createLoader",value:function(e){var t=void 0;try{t=tabris._client.loadAndExecute(e,modulePrefix,modulePostfix)}catch(t){throw new Error("Could not parse "+e+":"+t)}return t.loadError?null:t.executeResult}},{key:"readJSON",value:function(e){var t=tabris._client.load(e);if(t)try{return JSON.parse(t)}catch(t){throw new Error("Could not parse "+e)}}}]),e}();function findFileModule(e){var t=normalizePath(dirname(this.id)+"/"+e),r=findModule.call(this,t,getPostfixes(e));if(!r)throw new Error("Cannot find module '"+e+"'");return r}function findNodeModule(e){var t=dirname(this.id),r=getPostfixes(e),n="/node_modules/"+e,i=void 0;do{i=findModule.call(this,normalizePath(t+n),r),(t=normalizePath(t+"/.."))&&"/node_modules"===t.slice(-1*"/node_modules".length)&&(t=normalizePath(t+"/.."))}while(!i&&t);if(!i)throw new Error("Cannot find module '"+e+"'");return i}function findModule(e,t){if(e)for(var r=0;r<t.length;r++){var n=getModule.call(this,e+t[r]);if("/package.json"===t[r])if(getMain(n)){var i=normalizePath(e+"/"+getMain(n));n=findModule.call(this,i,FILE_POSTFIXES)}else n=null;if(n)return n}}function getMain(e){return e&&e.exports&&e.exports.main}function getModule(e){if(e in this._cache)return this._cache[e];if(".json"===e.slice(-5)){var t=Module.readJSON(e);if(t)return new Module(e,this,t)}else{var r=Module.createLoader(e);if(r)return new Module(e,this,r)}this._cache[e]=!1}function getPostfixes(e){return"/"===e.slice(-1)?FOLDER_POSTFIXES:FILE_POSTFIXES}var modulePrefix="(function (module, exports, require, __filename, __dirname) { ",modulePostfix="\n});";function dirname(e){return e&&"."===e.slice(0,1)?e.slice(0,e.lastIndexOf("/")):"./"}function normalizePath(e){for(var t=[],r=e.split("/"),n=0;n<r.length;n++){var i=r[n];if(".."===i){var o=t.pop();if(!o||"."===o)return null}else("."===i?0===t.length:""!==i)&&t.push(i)}return t.join("/")}function printError(e,t){console.print?console.print("error",e+(t.stack||t)):console.error(e,t)}global.window=global.self=global,global.tabris={},tabris._start=function(e){try{tabris._client=e;var t=new Module;try{t.require("tabris"),tabris._client=e}catch(e){return void printError("Could not load tabris module:",e)}tabris._defineModule=function(e,r){return new Module(e,t,r)};var r=document.createElement("script");r.src="./cordova.js",document.head.appendChild(r),tabris._init&&tabris._init(e);var n=function(){try{t.require("./"),tabris.trigger("flush")}catch(e){printError("Could not load main module:",e)}};tabris._entryPoint?(tabris._entryPoint(n),delete tabris._entryPoint):n(),tabris.trigger("flush")}catch(e){printError("Could not start tabris:",e)}},tabris._notify=function(){return tabris._notify.apply(this,arguments)};