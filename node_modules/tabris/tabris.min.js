"use strict";var _get=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0},_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function asap(e){setTimeout(e,0)}function noop(){}var LAST_ERROR=null,IS_ERROR={};function getThen(e){try{return e.then}catch(e){return LAST_ERROR=e,IS_ERROR}}function tryCallOne(e,t){try{return e(t)}catch(e){return LAST_ERROR=e,IS_ERROR}}function tryCallTwo(e,t,r){try{e(t,r)}catch(e){return LAST_ERROR=e,IS_ERROR}}function Promise(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");Object.defineProperties(this,{_deferredState:{value:0,writable:!0},_state:{value:0,writable:!0},_value:{value:null,writable:!0},_deferreds:{value:null,writable:!0}}),e!==noop&&doResolve(e,this)}function safeThen(e,t,r){return new e.constructor(function(n,i){var o=new Promise(noop);o.then(n,i),handle(e,new Handler(t,r,o))})}function handle(e,t){for(;3===e._state;)e=e._value;if(Promise._onHandle&&Promise._onHandle(e),0===e._state)return 0===e._deferredState?(e._deferredState=1,void(e._deferreds=t)):1===e._deferredState?(e._deferredState=2,void(e._deferreds=[e._deferreds,t])):void e._deferreds.push(t);handleResolved(e,t)}function handleResolved(e,t){asap(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n=tryCallOne(r,e._value);n===IS_ERROR?reject(t.promise,LAST_ERROR):resolve(t.promise,n)}else 1===e._state?resolve(t.promise,e._value):reject(t.promise,e._value)})}function resolve(e,t){if(t===e)return reject(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=getThen(t);if(r===IS_ERROR)return reject(e,LAST_ERROR);if(r===e.then&&t instanceof Promise)return e._state=3,e._value=t,void finale(e);if("function"==typeof r)return void doResolve(r.bind(t),e)}e._state=1,e._value=t,finale(e)}function reject(e,t){e._state=2,e._value=t,Promise._onReject&&Promise._onReject(e,t),finale(e)}function finale(e){if(1===e._deferredState&&(handle(e,e._deferreds),e._deferreds=null),2===e._deferredState){for(var t=0;t<e._deferreds.length;t++)handle(e,e._deferreds[t]);e._deferreds=null}}function Handler(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function doResolve(e,t){var r=!1,n=tryCallTwo(e,function(e){r||(r=!0,resolve(t,e))},function(e){r||(r=!0,reject(t,e))});r||n!==IS_ERROR||(r=!0,reject(t,LAST_ERROR))}Promise._onHandle=null,Promise._onReject=null,Promise._noop=noop,Promise.prototype.then=function(e,t){if(this.constructor!==Promise)return safeThen(this,e,t);var r=new Promise(noop);return handle(this,new Handler(e,t,r)),r};var TRUE=valuePromise(!0),FALSE=valuePromise(!1),NULL=valuePromise(null),UNDEFINED=valuePromise(void 0),ZERO=valuePromise(0),EMPTYSTRING=valuePromise("");function valuePromise(e){var t=new Promise(Promise._noop);return t._state=1,t._value=e,t}function isPending(e){return 0===e._state}function isRejected(e){return 2===e._state}function getPromiseResult(e){return e._value}function assign(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n){var i=Object.keys(Object(n));for(var o of i){var a=Object.getOwnPropertyDescriptor(n,o);void 0!==a&&a.enumerable&&(t[o]=n[o])}}}return t}Promise.resolve=function(e){if(e instanceof Promise)return e;if(null===e)return NULL;if(void 0===e)return UNDEFINED;if(!0===e)return TRUE;if(!1===e)return FALSE;if(0===e)return ZERO;if(""===e)return EMPTYSTRING;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new Promise(t.bind(e))}catch(e){return new Promise(function(t,r){return r(e)})}return valuePromise(e)},Promise.all=function(e){var t=Array.prototype.slice.call(e);return new Promise(function(e,r){if(0===t.length)return e([]);var n=t.length;function res(i,o){if(o&&("object"==typeof o||"function"==typeof o)){if(o instanceof Promise&&o.then===Promise.prototype.then){for(;3===o._state;)o=o._value;return 1===o._state?res(i,o._value):(2===o._state&&r(o._value),void o.then(function(e){return res(i,e)},r))}var a=o.then;if("function"==typeof a)return void new Promise(a.bind(o)).then(function(e){return res(i,e)},r)}t[i]=o,0==--n&&e(t)}for(var i=0;i<t.length;i++)res(i,t[i])})},Promise.reject=function(e){return new Promise(function(t,r){return r(e)})},Promise.race=function(e){return new Promise(function(t,r){return e.forEach(function(e){return Promise.resolve(e).then(t,r)})})},Promise.prototype.catch=function(e){return this.then(null,e)},global.Promise=Promise,"undefined"==typeof window&&(global.window=global),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:assign});var numbersOnlyRE=/^\d+$/,objectHasOwnProperty=Object.prototype.hasOwnProperty,propertyIsEnumerable=Object.prototype.propertyIsEnumerable,regExpToString=RegExp.prototype.toString,dateToISOString=Date.prototype.toISOString,errorToString=Error.prototype.toString,CIRCULAR_ERROR_MESSAGE=void 0;function tryStringify(e){try{return JSON.stringify(e)}catch(e){if(!CIRCULAR_ERROR_MESSAGE)try{var t={};t.a=t,JSON.stringify(t)}catch(e){CIRCULAR_ERROR_MESSAGE=e.message}if("TypeError"===e.name&&e.message===CIRCULAR_ERROR_MESSAGE)return"[Circular]";throw e}}function format(e){if("string"!=typeof e){for(var t=new Array(arguments.length),r=0;r<arguments.length;r++)t[r]=inspect(arguments[r]);return t.join(" ")}if(1===arguments.length)return e;for(var n="",i=1,o=0,a=0;a<e.length;)if(37===e.charCodeAt(a)&&a+1<e.length){if(37!==e.charCodeAt(a+1)&&i>=arguments.length){++a;continue}switch(e.charCodeAt(a+1)){case 100:o<a&&(n+=e.slice(o,a)),n+=Number(arguments[i++]);break;case 105:o<a&&(n+=e.slice(o,a)),n+=parseInt(arguments[i++]);break;case 102:o<a&&(n+=e.slice(o,a)),n+=parseFloat(arguments[i++]);break;case 106:o<a&&(n+=e.slice(o,a)),n+=tryStringify(arguments[i++]);break;case 115:o<a&&(n+=e.slice(o,a)),n+=String(arguments[i++]);break;case 37:o<a&&(n+=e.slice(o,a)),n+="%";break;default:o<a&&(n+=e.slice(o,a)),n+="%",o=a+=1;continue}o=a+=2}else++a;for(0===o?n=e:o<e.length&&(n+=e.slice(o));i<arguments.length;){var s=arguments[i++];n+=null===s||"object"!=typeof s&&"symbol"!=typeof s?" "+s:" "+inspect(s)}return n}function inspect(e){return formatValue({seen:[],breakLength:60,maxArrayLength:20},e,2)}function arrayToHash(e){for(var t=Object.create(null),r=0;r<e.length;r++){t[e[r]]=!0}return t}function formatValue(e,t,r){var n=formatPrimitive(e,t);if(n)return n;var i=Object.keys(t),o=arrayToHash(i),a=Object.getOwnPropertySymbols(t).filter(function(e){return propertyIsEnumerable.call(t,e)});i=i.concat(a);var s=t;try{isDate(t)||(s=t.valueOf())}catch(e){}"string"==typeof s&&(i=i.filter(function(e){return"symbol"==typeof e||!(e>=0&&e<s.length)})),isError(t)&&"iOS"===tabris.device.platform&&(i=i.filter(function(e){return!["line","column","sourceURL"].includes(e)}));var c=getConstructorOf(t);if(0===i.length){if("function"==typeof t)return"["+(c?c.name:"Function")+(t.name?": "+t.name:"")+"]";if(isRegExp(t))return regExpToString.call(t);if(isDate(t))return Number.isNaN(t.getTime())?t.toString():dateToISOString.call(t);if(isError(t))return formatError(t);if("string"==typeof s)return"[String: "+formatPrimitive(e,s)+"]";if("symbol"==typeof s)return"[Symbol: "+formatPrimitive(e,s)+"]";if("number"==typeof s)return"[Number: "+formatPrimitive(e,s)+"]";if("boolean"==typeof s)return"[Boolean: "+formatPrimitive(e,s)+"]"}var l="",u=!1,h=formatObject,p=void 0;(Array.isArray(t)?(c&&"Array"===c.name&&(c=null),p=["[","]"],u=0===t.length,h=formatArray):isArrayBuffer(t)?(p=["{","}"],i.unshift("byteLength"),o.byteLength=!0):isTypedArray(t)?(p=["[","]"],h=formatTypedArray):isPromise(t)?(p=["{","}"],h=formatPromise):(c&&"Object"===c.name&&(c=null),p=["{","}"],u=!0),u=!0===u&&0===i.length,"function"==typeof t)&&(l=" ["+(c?c.name:"Function")+(t.name?": "+t.name:"")+"]");if(isRegExp(t)&&(l=" "+regExpToString.call(t)),isDate(t)&&(l=" "+dateToISOString.call(t)),isError(t)&&(l=" "+formatError(t)),"string"==typeof s&&(l=" [String: "+formatPrimitive(e,s)+"]"),"number"==typeof s&&(l=" [Number: "+formatPrimitive(e,s)+"]"),"boolean"==typeof s&&(l=" [Boolean: "+formatPrimitive(e,s)+"]"),""===l&&c&&(p[0]=c.name+" "+p[0]),!0===u)return""+p[0]+l+p[1];if(r<0)return isRegExp(t)?regExpToString.call(t):Array.isArray(t)?"[Array]":"[Object]";e.seen.push(t);var f=h(e,t,r,o,i);return e.seen.pop(),reduceToSingleString(f,l,p,e.breakLength)}function formatNumber(e,t){return Object.is(t,-0)?"-0":""+t}function formatPrimitive(e,t){if(void 0===t)return"undefined";if(null===t)return"null";var r=typeof t;return"string"===r?"'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'":"number"===r?formatNumber(e,t):"boolean"===r?""+t:"symbol"===r?t.toString():void 0}function formatError(e){return e.stack?"iOS"===tabris.device.platform?e.constructor.name+": "+e.message+"\n  "+e.stack.split("\n").join("\n  "):e.stack:"["+errorToString.call(e)+"]"}function formatObject(e,t,r,n,i){return i.map(function(i){return formatProperty(e,t,r,n,i,!1)})}function formatArray(e,t,r,n,i){for(var o=[],a=0,s=0;s<t.length&&a<e.maxArrayLength;){for(var c=0;s<t.length&&!hasOwnProperty(t,String(s));)c++,s++;if(c>0){var l="<"+c+" empty item"+(c>1?"s":"")+">";o.push(l)}else o.push(formatProperty(e,t,r,n,String(s),!0)),s++;a++}var u=t.length-s;u>0&&o.push("... "+u+" more item"+(u>1?"s":""));for(var h=0;h<i.length;h++){var p=i[h];"symbol"!=typeof p&&numbersOnlyRE.test(p)||o.push(formatProperty(e,t,r,n,p,!0))}return o}function formatTypedArray(e,t,r,n,i){for(var o=Math.min(Math.max(0,e.maxArrayLength),t.length),a=t.length-o,s=new Array(o),c=0;c<o;++c)s[c]=formatNumber(e,t[c]);for(var l of(a>0&&s.push("... "+a+" more item"+(a>1?"s":"")),i))"symbol"!=typeof l&&numbersOnlyRE.test(l)||s.push(formatProperty(e,t,r,n,l,!0));return s}function formatPromise(e,t,r,n,i){var o=[];if(isPending(t))o.push("<pending>");else{var a=null===r?null:r-1,s=formatValue(e,getPromiseResult(t),a);isRejected(t)?o.push("<rejected> "+s):o.push(s)}for(var c=0;c<i.length;c++)o.push(formatProperty(e,t,r,n,i[c],!1));return o}function formatProperty(e,t,r,n,i,o){var a,s=void 0,c=void 0;if((a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?c=a.set?"[Getter/Setter]":"[Getter]":a.set&&(c="[Setter]"),hasOwnProperty(n,i)||(s="symbol"==typeof i?"["+i.toString()+"]":"["+i+"]"),c||(e.seen.indexOf(a.value)<0?(c=formatValue(e,a.value,null===r?null:r-1)).indexOf("\n")>-1&&(c=o?c.replace(/\n/g,"\n  "):c.replace(/^|\n/g,"\n   ")):c="[Circular]"),void 0===s){if(o&&numbersOnlyRE.test(i))return c;s=JSON.stringify(""+i),s=/^"[a-zA-Z_][a-zA-Z_0-9]*"$/.test(s)?s.substr(1,s.length-2):s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/^"|"$/g,"'").replace(/\\\\/g,"\\")}return s+": "+c}function reduceToSingleString(e,t,r,n){return e.reduce(function(e,t){return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>n?r[0]+(""===t&&1===r[0].length?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:""+r[0]+t+" "+e.join(", ")+" "+r[1]}function hasOwnProperty(e,t){return objectHasOwnProperty.call(e,t)}function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}function isDate(e){return"[object Date]"===objectToString(e)||e instanceof Date}function isPromise(e){return"[object Promise]"===objectToString(e)||e instanceof Promise}function isRegExp(e){return"[object RegExp]"===objectToString(e)||e instanceof RegExp}var typedArrayTypes=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array"],typedArrayNames={};for(var type of typedArrayTypes)typedArrayNames["[object "+type+"]"]=!0;function isTypedArray(e){return typedArrayNames[objectToString(e)]}function isArrayBuffer(e){return"[object ArrayBuffer]"===objectToString(e)||e instanceof ArrayBuffer}function getConstructorOf(e){for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value;e=Object.getPrototypeOf(e)}return null}function objectToString(e){return Object.prototype.toString.call(e)}var defaultConsole=global.console.print?createConsole(global.console):global.console;defaultConsole.debug||(defaultConsole.debug=function(){defaultConsole.log(...arguments)});var log=function(){defaultConsole.log(...arguments)},warn=function(){defaultConsole.warn(...arguments)},error=function(){defaultConsole.error(...arguments)};function createConsole(e){var t={},r=function(r){t[r]=function(){e.print(r,format(...arguments))}};for(var n of["debug","info","log","warn","error"])r(n);return t}function checkVersion(e,t){if(t){var r=e.split("."),n=t.split(".");r[0]===n[0]&&r[1]===n[1]||error('Version mismatch: JavaScript module "tabris" (version '+e+") is incompatible with the native tabris platform (version "+t+").")}}function omit(e,t){var r={};for(var n in e)t.includes(n)||(r[n]=e[n]);return r}function isObject(e){return null!==e&&"object"==typeof e}function capitalizeFirstChar(e){return e.charAt(0).toUpperCase()+e.slice(1)}function normalizePath(e){if("string"!=typeof e)throw new Error("must be a string");if(""===e)throw new Error("must not be empty");var t=(e.startsWith("/")?"/":"")+e.split(/\/+/).map(function(e){if(".."===e)throw new Error("must not contain '..'");return"."===e?"":e}).filter(function(e){return!!e}).join("/");return t||"."}function normalizePathUrl(e){if("string"!=typeof e)throw new Error("must be a string");var t=/^([a-z-]+:(\/\/)?)?(.*)/.exec(e),r=t[1]||"",n=t[3]||"";return"data:"===r?e:r+normalizePath(n)}var EventObject=function(){function EventObject(){var e=this;_classCallCheck(this,EventObject),this.$type="",this.$target=null,Object.defineProperties(this,{type:{enumerable:!0,get:function(){return e.$type}},target:{enumerable:!0,get:function(){return e.$target}},timeStamp:{enumerable:!0,value:Date.now()}})}return _createClass(EventObject,[{key:"preventDefault",value:function preventDefault(){this.$defaultPrevented=!0}},{key:"_initEvent",value:function _initEvent(e,t){if(arguments.length<2)throw new Error("Not enough arguments to initEvent");this.$type=e,this.$target=t}},{key:"defaultPrevented",get:function(){return!!this.$defaultPrevented}}]),EventObject}(),Events={on:function(e,t,r){if(isObject(e)){for(var n in e)this.on(n,e[n]);return this}var i=this._isListening(e);return this._callbacks=this._callbacks||[],this._callbacks[e]=(this._callbacks[e]||[]).concat(),this._callbacks[e].some(function(e){return(e.fn===t||"_callback"in t&&e.fn._callback===t._callback)&&e.ctx===r})||this._callbacks[e].push({fn:t,ctx:r}),i||this._listen(e,!0),this},off:function(e,t,r){if(isObject(e)){for(var n in e)this.off(n,e[n]);return this}if(!e||!t)throw new Error("Not enough arguments");if(this._callbacks&&e in this._callbacks){for(var i=this._callbacks[e].concat(),o=i.length-1;o>=0;o--)i[o].fn!==t&&i[o].fn._callback!==t||i[o].ctx!==r||i.splice(o,1);0===i.length?(delete this._callbacks[e],0===Object.keys(this._callbacks).length&&delete this._callbacks):this._callbacks[e]=i}return this._isListening(e)||this._listen(e,!1),this},once:function(e,t,r){if(isObject(e)){for(var n in e)this.once(n,e[n]);return this}var i=this,o=function(){i._isDisposed||i.off(e,o,r),t.apply(this,arguments)};return o._callback=t,this.on(e,o,r)},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._isDisposed&&this._callbacks&&e in this._callbacks){t instanceof EventObject&&t._initEvent(e,this);for(var r=this._callbacks[e],n=0;n<r.length;n++){var i=r[n];i.fn.call(i.ctx||this,t)}}return this},_isListening:function(e){return!!this._callbacks&&(!e||e in this._callbacks)},_listen:function(){}};function imageToArray(e){return[e.src,checkValue(e.width),checkValue(e.height),checkValue(e.scale)]}function imageFromArray(e){var t={src:e[0]};return e[1]&&(t.width=e[1]),e[2]&&(t.height=e[2]),e[3]&&(t.scale=e[3]),t}function checkValue(e){return null!=e?e:null}function colorArrayToString(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+(3===e.length?1:Math.round(100*e[3]/255)/100)+")"}function colorStringToArray(e){if("transparent"===e)return[0,0,0,0];if(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?$/.test(e))return[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),""===RegExp.$4?255:parseInt(RegExp.$4,16)];if(/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?$/.test(e))return[17*parseInt(RegExp.$1,16),17*parseInt(RegExp.$2,16),17*parseInt(RegExp.$3,16),""===RegExp.$4?255:17*parseInt(RegExp.$4,16)];if(/^rgb\s*\(\s*([+-]?[0-9]+)\s*,\s*([+-]?[0-9]+)\s*,\s*([+-]?[0-9]+)\s*\)$/.test(e))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),255];if(/^rgba\s*\(\s*([+-]?[0-9]+)\s*,\s*([+-]?[0-9]+)\s*,\s*([+-]?[0-9]+)\s*,\s*([+-]?([0-9]*\.)?[0-9]+)\s*\)$/.test(e))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),Math.round(255*Math.max(0,Math.min(1,parseFloat(RegExp.$4))))];if(e in NAMES){var t=NAMES[e];return[t[0],t[1],t[2],255]}throw new Error("invalid color: "+e)}var NAMES={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]};function fontStringToObject(e){var t={family:[],size:0,style:"normal",weight:"normal"},r=e.split(/(?:\s|^)\d+px(?:\s|$)/);return checkTruthy(2===r.length||1===r.length,"Invalid font syntax"),t.size=parseInt(/(?:\s|^)(\d+)px(?:\s|$)/.exec(e)[1],10),parseStyles(t,r[0]),parseFamily(t,r[1]),t}function fontObjectToString(e){return["normal"===e.style?"":e.style,"normal"===e.weight?"":e.weight,e.size+"px",e.family.join(", ")].filter(function(e){return!!e}).join(" ").trim()}function parseStyles(e,t){var r=t.trim().split(/\s+/);checkTruthy(r.length<=2,"Too many font styles"),r.forEach(function(t){switch(t.trim()){case"italic":checkTruthy("normal"===e.style,"Invalid font variant"),e.style="italic";break;case"black":case"bold":case"medium":case"thin":case"light":checkTruthy("normal"===e.weight,"Invalid font weight"),e.weight=t.trim();break;case"normal":case"":break;default:throw new Error("Unknown font property: "+t.trim())}})}function parseFamily(e,t){(t?t.split(","):[]).forEach(function(t){checkTruthy(/(?:^\s*[^"']+\s*$)|(?:^\s*"[^"']+"\s*$)|(?:^\s*'[^"']+'\s*$)/.exec(t),"Invalid font family: "+t),e.family.push(/^\s*["']?([^"']*)/.exec(t)[1].trim())})}function checkTruthy(e,t){if(!e)throw new Error(t)}function EventsClass(){}Object.assign(EventsClass.prototype,Events);var NativeObject=function(e){function NativeObject(){_classCallCheck(this,NativeObject);var e=_possibleConstructorReturn(this,(NativeObject.__proto__||Object.getPrototypeOf(NativeObject)).call(this));if(!tabris._nativeBridge)throw new Error("tabris.js not started");if(e.constructor===NativeObject)throw new Error("Cannot instantiate abstract NativeObject");var t=tabris._proxies.register(e);return Object.defineProperty(e,"cid",{value:t}),e}return _inherits(NativeObject,EventsClass),_createClass(NativeObject,null,[{key:"defineProperties",value:function defineProperties(e,t){for(var r in t)NativeObject.defineProperty(e,r,t[r])}},{key:"defineProperty",value:function defineProperty(e,t,r){e["$prop_"+t]=normalizeProperty(r),Object.defineProperty(e,t,{set:function(e){this.$setProperty(t,e)},get:function(){return this.$getProperty(t)}})}},{key:"extend",value:function extend(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NativeObject;return function(r){function _class(t){_classCallCheck(this,_class);var r=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this));return r._create(e,t||{}),r}return _inherits(_class,t),_class}()}}]),_createClass(NativeObject,[{key:"set",value:function set(e,t){return"string"==typeof e?setExistingProperty.call(this,e,t):this._reorderProperties(Object.keys(e)).forEach(function(t){setExistingProperty.call(this,t,e[t])},this),this}},{key:"get",value:function get(e){return this[e]}},{key:"$getProperty",value:function $getProperty(e){if(!this._isDisposed){var t=(this.$getPropertyGetter(e)||this._getStoredProperty).call(this,e);return this._decodeProperty(this._getTypeDef(e),t)}warn('Cannot get property "'+e+'" on disposed object')}},{key:"$setProperty",value:function $setProperty(e,t){if(this._isDisposed)warn('Cannot set property "'+e+'" on disposed object');else{var r=this._getTypeDef(e),n=void 0;try{n=this._encodeProperty(r,t)}catch(t){return void warn(this+': Ignored unsupported value for property "'+e+'": '+t.message)}(this.$getPropertySetter(e)||this._storeProperty).call(this,e,n)}}},{key:"_storeProperty",value:function _storeProperty(e,t){t!==this._getStoredProperty(e)&&(void 0===t&&this._props?delete this._props[e]:(this._props||(this._props={}),this._props[e]=t),this._triggerChangeEvent(e,t))}},{key:"_getStoredProperty",value:function _getStoredProperty(e){var t=this._props?this._props[e]:void 0;return void 0===t&&(t=this._getDefaultPropertyValue(e)),t}},{key:"_getTypeDef",value:function _getTypeDef(e){var t=this["$prop_"+e];return t?t.type:null}},{key:"_getDefaultPropertyValue",value:function _getDefaultPropertyValue(e){var t=this["$prop_"+e];return t?valueOf(t.default):void 0}},{key:"_encodeProperty",value:function _encodeProperty(e,t){return e&&e.encode?e.encode(t):t}},{key:"_decodeProperty",value:function _decodeProperty(e,t){return e&&e.decode?e.decode(t):t}},{key:"$getPropertyGetter",value:function $getPropertyGetter(e){var t=this["$prop_"+e];return t?t.get:void 0}},{key:"$getPropertySetter",value:function $getPropertySetter(e){var t=this["$prop_"+e];return t?t.set:void 0}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(e,t){var r=this._getTypeDef(e),n=this._decodeProperty(r,t);this.$trigger(e+"Changed",{value:n})}},{key:"_create",value:function _create(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tabris._nativeBridge.create(this.cid,e),this._reorderProperties(Object.keys(t)).forEach(function(e){setExistingProperty.call(this,e,t[e])},this),this}},{key:"_reorderProperties",value:function _reorderProperties(e){return e}},{key:"dispose",value:function dispose(){this._dispose()}},{key:"_dispose",value:function _dispose(e){this._isDisposed||this._inDispose||(this._inDispose=!0,this._trigger("dispose"),this._release(),e||tabris._nativeBridge.destroy(this.cid),tabris._proxies.remove(this.cid),delete this._props,this._isDisposed=!0)}},{key:"_release",value:function _release(){}},{key:"isDisposed",value:function isDisposed(){return!!this._isDisposed}},{key:"_listen",value:function _listen(){}},{key:"_nativeListen",value:function _nativeListen(e,t){this._checkDisposed(),tabris._nativeBridge.listen(this.cid,e,t)}},{key:"_trigger",value:function _trigger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$trigger(e,t)}},{key:"$trigger",value:function $trigger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new EventObject;for(var n in t)n in r||Object.defineProperty(r,n,{enumerable:!0,value:t[n]});return this.trigger(e,r),!!r.defaultPrevented}},{key:"_onoff",value:function _onoff(e,t,r){t?this.on(e,r):this.off(e,r)}},{key:"_checkDisposed",value:function _checkDisposed(){if(this._isDisposed)throw new Error("Object is disposed")}},{key:"_nativeSet",value:function _nativeSet(e,t){this._checkDisposed(),tabris._nativeBridge.set(this.cid,e,t)}},{key:"_nativeGet",value:function _nativeGet(e){return this._checkDisposed(),tabris._nativeBridge.get(this.cid,e)}},{key:"_nativeCall",value:function _nativeCall(e,t){return this._checkDisposed(),tabris._nativeBridge.call(this.cid,e,t)}},{key:"toString",value:function toString(){return this.constructor.name}}]),NativeObject}();function setExistingProperty(e,t){e in this?this[e]=t:warn('Unknown property "'+e+'"')}function normalizeProperty(e){var t="string"==typeof e?{type:e}:e;return{type:resolveType(t.type||"any"),default:t.default,nocache:t.nocache,set:t.readonly&&readOnlySetter||t.set||defaultSetter,get:t.get||defaultGetter}}function resolveType(e){var t=e;if("string"==typeof e?t=types[e]:Array.isArray(e)&&(t=types[e[0]]),"object"!=typeof t)throw new Error("Can not find property type "+e);if(Array.isArray(e)){t=Object.assign({},t);var r=e.slice(1);t.encode&&(t.encode=wrapCoder(t.encode,r)),t.decode&&(t.decode=wrapCoder(t.decode,r))}return t}function wrapCoder(e,t){return function(r){return e.apply(global,[r].concat(t))}}function readOnlySetter(e){warn('Can not set read-only property "'+e+'"')}function defaultSetter(e,t){this._nativeSet(e,void 0===t?null:t),this["$prop_"+e].nocache?this._triggerChangeEvent(e,t):this._storeProperty(e,t)}function defaultGetter(e){var t=this._getStoredProperty(e);return void 0===t&&(t=this._nativeGet(e)),t}function valueOf(e){return e instanceof Function?e():e}var WidgetCollection=function(){function WidgetCollection(e,t,r){_classCallCheck(this,WidgetCollection);var n=e instanceof WidgetCollection?e.toArray():e;this._array=select(n,t||"*",r);for(var i=0;i<this._array.length;i++)this[i]=this._array[i]}return _createClass(WidgetCollection,[{key:"first",value:function first(e){return e?this.filter(e).first():this._array[0]}},{key:"last",value:function last(e){return e?this.filter(e).last():this._array[this._array.length-1]}},{key:"toArray",value:function toArray(){return this._array.concat()}},{key:"forEach",value:function forEach(e){var t=this;this._array.forEach(function(r,n){return e(r,n,t)})}},{key:"indexOf",value:function indexOf(e){return this._array.indexOf(e)}},{key:"includes",value:function includes(e){return-1!==this._array.indexOf(e)}},{key:"filter",value:function filter(e){return new WidgetCollection(this._array,e)}},{key:"get",value:function get(e){if(this._array[0])return this._array[0].get(e)}},{key:"parent",value:function parent(){var e=[];for(var t of this._array){var parent=t.parent();parent&&-1===e.indexOf(parent)&&e.push(parent)}if(e.length)return new WidgetCollection(e)}},{key:"children",value:function children(e){var t=[];for(var r of this._array)t.push.apply(t,r.children());return new WidgetCollection(t,e)}},{key:"find",value:function find(e){return new WidgetCollection(this.children()._array,e,!0)}},{key:"appendTo",value:function appendTo(e){e.append(this)}},{key:"set",value:function set(){var e=arguments;return this._array.forEach(function(t){return t.set.apply(t,e)}),this}},{key:"on",value:function on(){var e=arguments;return this._array.forEach(function(t){return t.on.apply(t,e)}),this}},{key:"off",value:function off(){var e=arguments;return this._array.forEach(function(t){return t.off.apply(t,e)}),this}},{key:"once",value:function once(){var e=arguments;return this._array.forEach(function(t){return t.once.apply(t,e)}),this}},{key:"trigger",value:function trigger(){var e=arguments;return this._array.forEach(function(t){return t.trigger.apply(t,e)}),this}},{key:"animate",value:function animate(){var e=arguments;this._array.forEach(function(t){return t.animate.apply(t,e)})}},{key:"dispose",value:function dispose(){var e=arguments;this._array.forEach(function(t){return t.dispose.apply(t,e)})}},{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}}}}},{key:"length",get:function(){return this._array.length}}]),WidgetCollection}();function select(e,t,r){if(!e||0===e.length)return[];if("*"===t&&!r)return e.concat();var n=getFilter(t);return r?deepSelect([],e,n):e.filter(n)}function deepSelect(e,t,r){for(var n of t){r(n)&&e.push(n);var i=n.children();i instanceof WidgetCollection&&i.length&&deepSelect(e,i,r)}return e}function getFilter(e){var t={},r=isFilter(e)?e:createMatcher(e);return function(e){return!t[e.cid]&&(!!r(e)&&(t[e.cid]=!0,!0))}}function createMatcher(e){if(e instanceof Function)return function(t){return t instanceof e};if("#"===e.charAt(0)){var t=e.slice(1);return function(e){return t===e.id}}if("."===e.charAt(0)){var r=e.slice(1);return function(e){return-1!==e.classList.indexOf(r)}}return"*"===e?function(){return!0}:function(t){return e===t.constructor.name}}function isFilter(e){return e instanceof Function&&!isWidgetConstructor(e)}function isWidgetConstructor(e){for(var t=e.prototype;t;){if(t===NativeObject.prototype)return!0;t=Object.getPrototypeOf(t)}return!1}var types={any:{},boolean:{encode:function(e){return!!e}},string:{encode:function(e){return null==e?"":""+e}},number:{encode:function(e){return encodeNumber(e)}},natural:{encode:function(e){return(e=encodeNumber(e))<0?0:Math.round(e)}},integer:{encode:function(e){return e=encodeNumber(e),Math.round(e)}},function:{encode:function(e){if("function"!=typeof e)throw new Error(typeof e+" is not a function: "+e);return e}},choice:{encode:function(e,t){return-1===t.indexOf(e)&&throwNotAcceptedError(t,e),e}},color:{encode:function(e){if(null!==e&&"initial"!==e)return colorStringToArray(e)},decode:function(e){return e?colorArrayToString(e):"rgba(0, 0, 0, 0)"}},font:{encode:function(e){if(null!==e&&"initial"!==e)return fontStringToObject(e)},decode:function(e){return e?fontObjectToString(e):"initial"}},boxDimensions:{encode:function(e){if("initial"!==e){if(null===e||"number"==typeof e)return{left:e||0,right:e||0,top:e||0,bottom:e||0};if("object"==typeof e)return e;throw new Error("Invalid type: "+e)}}},image:{encode:function(e){if(!e)return null;if("string"==typeof e&&(e={src:e}),"object"!=typeof e)throw new Error("Not an image: "+e);try{e.src=normalizePathUrl(e.src)}catch(e){throw new Error("Invalid image.src: "+e.message)}return["scale","width","height"].forEach(function(t){if(t in e&&!isDimension(e[t]))throw new Error("image."+t+" is not a dimension: "+e[t])}),"scale"in e&&("width"in e||"height"in e)&&warn("Image scale is ignored if width or height are given"),imageToArray(e)},decode:function(e){return e?imageFromArray(e):null}},layoutData:{encode:function(e){return encodeLayoutData(e)},decode:function(e){return decodeLayoutData(e)}},edge:{encode:function(e){return null==e?null:encodeEdge(e)},decode:decodeLayoutAttr},dimension:{encode:function(e){return null==e?null:encodeNumber(e)},decode:decodeLayoutAttr},sibling:{encode:function(e){return null==e?null:encodeWidgetRef(e)},decode:decodeLayoutAttr},bounds:{encode:function(e){return[e.left,e.top,e.width,e.height]},decode:function(e){return{left:e[0],top:e[1],width:e[2],height:e[3]}}},proxy:{encode:function(e){return e instanceof NativeObject?e.cid:e instanceof WidgetCollection?e[0]?e[0].cid:null:e},decode:function(e){return tabris._proxies.find(e)}},nullable:{encode:function(e,t){return null===e?e:types[t].encode(e)}},opacity:{encode:function(e){return e=encodeNumber(e),Math.max(0,Math.min(1,e))}},transform:{encode:function(e){var t=Object.assign({},transformDefaults);for(var r in e){if(!(r in transformDefaults))throw new Error('Not a valid transformation containing "'+r+'"');t[r]=encodeNumber(e[r])}return t}},array:{encode:function(e,t){if(null==e)return[];if(!(e instanceof Array))throw new Error(typeof e+" is not an array: "+e);return t?e.map(types[t].encode):e}}},numberRegex=/^[+-]?([0-9]+|[0-9]*\.[0-9]+)$/,selectorRegex=/^(\*|prev\(\)|next\(\)|([#.]?[A-Za-z_][A-Za-z0-9_-]+))$/;function isDimension(e){return"number"==typeof e&&!isNaN(e)&&e>=0&&e!==1/0}function throwNotAcceptedError(e,t){var r=['Accepting "'];throw r.push(e.join('", "')),r.push('", given was: "',t+'"'),new Error(r.join(""))}function encodeNumber(e){if("string"==typeof e&&numberRegex.test(e))return parseFloat(e);if("number"!=typeof e)throw new Error("Not a number: "+toString(e));if(!isFinite(e))throw new Error("Invalid number: "+toString(e));return e}var transformDefaults={rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0},layoutEncoders={width:encodeNumber,height:encodeNumber,left:encodeEdge,right:encodeEdge,top:encodeEdge,bottom:encodeEdge,centerX:encodeNumber,centerY:encodeNumber,baseline:encodeWidgetRef};function encodeLayoutData(e){var t={};for(var r in e)if(null!=e[r]){if(!(r in layoutEncoders))throw new Error("Invalid key '"+r+"' in layoutData");try{t[r]=layoutEncoders[r](e[r])}catch(e){throw new Error("Invalid value for '"+r+"': "+e.message)}}return t}function encodeEdge(e){if("string"==typeof e){if(-1!==e.indexOf(" "))return encodeEdgeArray(e.split(/\s+/));if("%"===e[e.length-1]){var t=encodePercentage(e);return 0===t?0:[t,0]}if(numberRegex.test(e))return[0,parseFloat(e)];if(selectorRegex.test(e))return[e,0];throw new Error("Invalid dimension: "+toString(e))}if("number"==typeof e){if(!isFinite(e))throw new Error("Invalid number: "+toString(e));return e}if(Array.isArray(e))return encodeEdgeArray(e);if(e instanceof NativeObject)return[e,0];throw new Error("Invalid dimension: "+toString(e))}function encodeEdgeArray(e){if(2!==e.length)throw new Error("Wrong number of elements (must be 2): "+toString(e));var t=encodeEdgeRef(e[0]),r=encodeNumber(e[1]);return 0===t?r:[t,r]}function encodeEdgeRef(e){if("string"==typeof e){if("%"===e[e.length-1])return encodePercentage(e);if(selectorRegex.test(e))return e}if("number"==typeof e){if(!isFinite(e))throw new Error("Invalid number: "+toString(e));return e}if(e instanceof NativeObject)return e;throw new Error("Not a percentage or widget reference: "+toString(e))}function encodePercentage(e){var t=e.substr(0,e.length-1);if(numberRegex.test(t))return parseFloat(t);throw new Error("Invalid percentage value: "+toString(e))}function encodeWidgetRef(e){if(e instanceof NativeObject)return e;if("string"==typeof e&&selectorRegex.test(e))return e;throw new Error("Not a widget reference: "+toString(e))}function decodeLayoutData(e){if(!e)return null;var t={};for(var r in e)t[r]=decodeLayoutAttr(e[r]);return t}function decodeLayoutAttr(e){return Array.isArray(e)?0===e[0]?e[1]:0===e[1]?"number"==typeof e[0]?e[0]+"%":e[0]:["number"==typeof e[0]?e[0]+"%":e[0],e[1]]:e}function toString(e){return"string"==typeof e?"'"+e+"'":Array.isArray(e)?"["+e.map(toString).join(", ")+"]":"object"==typeof e&&null!=e?"{"+Object.keys(e).join(", ")+"}":""+e}var Layout={checkConsistency:function(e){var t=e;return"centerX"in t&&("left"in t||"right"in t)&&(warn("Inconsistent layoutData: centerX overrides left and right"),t=omit(t,["left","right"])),"baseline"in t?("top"in t||"bottom"in t||"centerY"in t)&&(warn("Inconsistent layoutData: baseline overrides top, bottom, and centerY"),t=omit(t,["top","bottom","centerY"])):"centerY"in t&&("top"in t||"bottom"in t)&&(warn("Inconsistent layoutData: centerY overrides top and bottom"),t=omit(t,["top","bottom"])),"left"in t&&"right"in t&&"width"in t&&(warn("Inconsistent layoutData: left and right are set, ignore width"),t=omit(t,["width"])),"top"in t&&"bottom"in t&&"height"in t&&(warn("Inconsistent layoutData: top and bottom are set, ignore height"),t=omit(t,["height"])),t},resolveReferences:function(e,t){var r={};for(var n in e)r[n]=resolveAttribute(e[n],t);return r},addToQueue:function(e){layoutQueue[e.cid]=e},flushQueue:function(){for(var e in layoutQueue)layoutQueue[e]._flushLayout();layoutQueue={}}},layoutQueue={};function resolveAttribute(e,t){return Array.isArray(e)?resolveArray(e,t):isNumber(e)?e:toProxyId(e,t)}function resolveArray(e,t){return isNumber(e[0])?e:[toProxyId(e[0],t),e[1]]}function toProxyId(e,t){if("prev()"===e){var r=getParent(t)._children(),n=r.indexOf(t);return n>0&&types.proxy.encode(r[n-1])||0}if("next()"===e){var i=getParent(t)._children(),o=i.indexOf(t);return o+1<i.length&&types.proxy.encode(i[o+1])||0}if("string"==typeof e){var a=t.siblings(e)[0];return types.proxy.encode(a)||0}return t.siblings().toArray().includes(e)&&types.proxy.encode(e)||0}function isNumber(e){return"number"==typeof e&&isFinite(e)}function getParent(e){return e.parent()||emptyParent}var emptyParent={children:function(){return[]}},NativeBridge=function(){function NativeBridge(e){_classCallCheck(this,NativeBridge),this.$bridge=e,this.$operations=[],this.$currentOperation={id:null},tabris.on("flush",this.flush,this)}return _createClass(NativeBridge,[{key:"create",value:function create(e,t){var r={};this.$operations.push(["create",e,t,r]),this.$currentOperation={id:e,properties:r}}},{key:"set",value:function set(e,t,r){if(this.$currentOperation.id===e)this.$currentOperation.properties[t]=r;else{var n={};n[t]=r,this.$operations.push(["set",e,n]),this.$currentOperation={id:e,properties:n}}}},{key:"listen",value:function listen(e,t,r){this.$operations.push(["listen",e,t,r]),this.$currentOperation={id:null}}},{key:"destroy",value:function destroy(e){this.$operations.push(["destroy",e]),this.$currentOperation={id:null}}},{key:"get",value:function get(e,t){return this.flush(),this.$bridge.get(e,t)}},{key:"call",value:function call(e,t,r){return this.flush(),this.$bridge.call(e,t,r)}},{key:"flush",value:function flush(){Layout.flushQueue();var e=this.$operations;this.$operations=[],this.$currentOperation={id:null};for(var t=e.length,r=0;r<t;r++){var n=e[r];switch(n[0]){case"create":this.$bridge.create(n[1],n[2],n[3]);break;case"set":this.$bridge.set(n[1],n[2]);break;case"listen":this.$bridge.listen(n[1],n[2],n[3]);break;case"destroy":this.$bridge.destroy(n[1])}}}}]),NativeBridge}(),ProxyStore=function(){function ProxyStore(){_classCallCheck(this,ProxyStore),this.$idSequence=1,this.$proxies={}}return _createClass(ProxyStore,[{key:"register",value:function register(e){var t=this.$generateId();if(t in this.$proxies)throw new Error("cid already in use: "+t);return this.$proxies[t]=e,t}},{key:"remove",value:function remove(e){delete this.$proxies[e]}},{key:"find",value:function find(e){return this.$proxies[e]||null}},{key:"$generateId",value:function $generateId(){return"o"+this.$idSequence++}}]),ProxyStore}(),Tabris=function(){function Tabris(){_classCallCheck(this,Tabris),this._started=!1,this._init=this._init.bind(this),this._notify=this._notify.bind(this)}return _createClass(Tabris,[{key:"_init",value:function _init(e){this._client=e,this._proxies=new ProxyStore,this._nativeBridge=new NativeBridge(e),this.trigger("start"),this._started=!0}},{key:"_setEntryPoint",value:function _setEntryPoint(e){this._entryPoint=e}},{key:"_notify",value:function _notify(e,t,r){var n=void 0;try{var i=this._proxies.find(e);if(i)try{n=i._trigger(t,r)}catch(e){error(e)}this.trigger("flush")}catch(e){error(e)}return n}},{key:"version",get:function(){return"2.4.2"}},{key:"started",get:function(){return!!this._started}}]),Tabris}();Object.assign(Tabris.prototype,Events);var Device=function(e){function Device(){_classCallCheck(this,Device);var e=_possibleConstructorReturn(this,(Device.__proto__||Object.getPrototypeOf(Device)).call(this));if(!0!==arguments[0])throw new Error("Device can not be created");return e._create("tabris.Device"),e}return _inherits(Device,NativeObject),_createClass(Device,[{key:"_listen",value:function _listen(e,t){"orientationChanged"===e?this._nativeListen(e,t):_get(Device.prototype.__proto__||Object.getPrototypeOf(Device.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){"orientationChanged"===e?this._triggerChangeEvent("orientation",t.orientation):_get(Device.prototype.__proto__||Object.getPrototypeOf(Device.prototype),"_trigger",this).call(this,e,t)}},{key:"dispose",value:function dispose(){throw new Error("Cannot dispose device object")}}]),Device}();function create(){return new Device(!0)}function publishDeviceProperties(e,t){t.devicePixelRatio=e.scaleFactor,t.device=createDevice(e),t.screen=createScreen(e),t.navigator=createNavigator(e)}function createDevice(e){var t={};return["model","vendor","platform","version"].forEach(function(r){defineReadOnlyProperty(t,r,function(){return e[r]})}),t}function createScreen(e){var t={};return defineReadOnlyProperty(t,"width",function(){return e.screenWidth}),defineReadOnlyProperty(t,"height",function(){return e.screenHeight}),t}function createNavigator(e){var t={};return defineReadOnlyProperty(t,"userAgent",function(){return"tabris-js"}),defineReadOnlyProperty(t,"language",function(){return e.language}),t}function defineReadOnlyProperty(e,t,r){Object.defineProperty(e,t,{get:r,set:function(){}})}function getOnce(e){var t=this._getStoredProperty(e);return t||(t=this._nativeGet(e),this._storeProperty(e,t)),t}NativeObject.defineProperties(Device.prototype,{model:{readonly:!0,get:getOnce},vendor:{readonly:!0,get:getOnce},platform:{readonly:!0,get:getOnce},version:{readonly:!0,get:getOnce},language:{readonly:!0},orientation:{readonly:!0},screenWidth:{readonly:!0},screenHeight:{readonly:!0},scaleFactor:{readonly:!0,get:getOnce},win_keyboardPresent:{readonly:!0},win_primaryInput:{readonly:!0}});var Printer=function(e){function Printer(){_classCallCheck(this,Printer);var e=_possibleConstructorReturn(this,(Printer.__proto__||Object.getPrototypeOf(Printer)).call(this));if(!0!==arguments[0])throw new Error("Printer can not be created");return e._create("tabris.Printer"),e}return _inherits(Printer,NativeObject),_createClass(Printer,[{key:"print",value:function print(e,t){var r=arguments,n=this;return new Promise(function(i,o){if(r.length<1)throw new Error("Not enough arguments to print");if(!isDataValid(e))throw new Error("data is not an ArrayBuffer or typed array");n._nativeCall("print",{data:e instanceof ArrayBuffer?e:e.buffer,options:t,onResult:function(e){return i({result:e})},onError:function(e){return o(new Error(e))}})})}},{key:"dispose",value:function dispose(){throw new Error("Cannot dispose printer object")}}]),Printer}();function isDataValid(e){return e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function create$1(){return new Printer(!0)}var CERTIFICATE_ALGORITHMS=["RSA2048","RSA4096","ECDSA256"],EVENT_TYPES=["foreground","background","pause","resume","terminate","backNavigation","certificatesReceived"],App=function(e){function App(){_classCallCheck(this,App);var e=_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).call(this));if(!0!==arguments[0])throw new Error("App can not be created");return e._create("tabris.App"),e}return _inherits(App,NativeObject),_createClass(App,[{key:"launch",value:function launch(e){var t=arguments,r=this;return new Promise(function(n,i){if(t.length<1)throw new Error("Not enough arguments to launch");if("string"!=typeof e)throw new Error("url is not a string");r._nativeCall("launch",{url:e,onError:function(e){return i(new Error(e))},onSuccess:function(){return n()}})})}},{key:"getResourceLocation",value:function getResourceLocation(e){this._resourceBaseUrl||(this._resourceBaseUrl=this._nativeGet("resourceBaseUrl"));var t=null!=e?"/"+normalizePath$1(""+e):"";return this._resourceBaseUrl+t}},{key:"dispose",value:function dispose(){throw new Error("tabris.app can not be disposed")}},{key:"reload",value:function reload(){this._nativeCall("reload",{})}},{key:"close",value:function close(){this._nativeCall("close")}},{key:"registerFont",value:function registerFont(e,t){if(arguments.length<2)throw new Error("Not enough arguments to register a font");if("string"!=typeof e)throw new Error("alias is not a string");if("string"!=typeof t)throw new Error("file is not a string");this._nativeCall("registerFont",{alias:e,file:t})}},{key:"installPatch",value:function installPatch(e,t){if("string"!=typeof e)throw new Error("parameter url is not a string");this._pendingPatchCallback?"function"==typeof t&&t(new Error("Another installPatch operation is already pending.")):(this._pendingPatchCallback=t||!0,this._nativeListen("patchInstall",!0),this._nativeCall("installPatch",{url:e}))}},{key:"_listen",value:function _listen(e,t){EVENT_TYPES.includes(e)?this._nativeListen(e,t):_get(App.prototype.__proto__||Object.getPrototypeOf(App.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("patchInstall"!==e)return _get(App.prototype.__proto__||Object.getPrototypeOf(App.prototype),"_trigger",this).call(this,e,t);this._nativeListen("patchInstall",!1);var r=this._pendingPatchCallback;if(delete this._pendingPatchCallback,"function"==typeof r)if(t.error)r(new Error(t.error));else try{r(null,t.success?JSON.parse(t.success):null)}catch(e){r(new Error("Failed to parse patch.json"))}}},{key:"_validateCertificate",value:function _validateCertificate(e){var t=this.$pinnedCerts[e.host];t&&!t.some(function(t){return e.hashes.includes(t)})&&e.preventDefault()}},{key:"id",get:function(){return this._nativeGet("appId")}},{key:"version",get:function(){return this._nativeGet("version")}},{key:"versionCode",get:function(){return this._nativeGet("versionId")}}]),App}();function checkCertificates(e){var t={};for(var r of e){if("string"!=typeof r.host)throw new Error("Invalid host for pinned certificate: "+r.host);if("string"!=typeof r.hash||!r.hash.startsWith("sha256/"))throw new Error("Invalid hash for pinned certificate: "+r.hash);if("iOS"===tabris.device.platform){if(!("algorithm"in r))throw new Error("Missing algorithm for pinned certificate: "+r.host);if("string"!=typeof r.algorithm||-1===CERTIFICATE_ALGORITHMS.indexOf(r.algorithm))throw new Error("Invalid algorithm for pinned certificate: "+r.algorithm)}t[r.host]=t[r.host]||[],t[r.host].push(r.hash)}return t}function create$2(){return new App(!0)}function normalizePath$1(e){return e.split(/\/+/).map(function(e){if(".."===e)throw new Error("Path must not contain '..'");return"."===e?"":e}).filter(function(e){return!!e}).join("/")}NativeObject.defineProperties(App.prototype,{pinnedCertificates:{type:"array",default:function(){return[]},set:function(e,t){this.$pinnedCerts=checkCertificates(t),this.on("certificatesReceived",this._validateCertificate,this),this._storeProperty(e,t),this._nativeSet(e,t)}}});var GestureRecognizer=function(e){function GestureRecognizer(e){_classCallCheck(this,GestureRecognizer);var t=_possibleConstructorReturn(this,(GestureRecognizer.__proto__||Object.getPrototypeOf(GestureRecognizer)).call(this));return t._create("tabris.GestureRecognizer",e),t}return _inherits(GestureRecognizer,NativeObject),_createClass(GestureRecognizer,[{key:"_listen",value:function _listen(e,t){"gesture"===e?this._nativeListen(e,t):_get(GestureRecognizer.prototype.__proto__||Object.getPrototypeOf(GestureRecognizer.prototype),"_listen",this).call(this,e,t)}}]),GestureRecognizer}();NativeObject.defineProperties(GestureRecognizer.prototype,{type:"string",target:"proxy",fingers:"natural",touches:"natural",duration:"natural",direction:"string"});var ANIMATABLE_PROPERTIES=["opacity","transform"],PROPERTIES={properties:{type:"any"},delay:{type:"natural"},duration:{type:"natural"},repeat:{type:"natural"},reverse:{type:"boolean"},easing:{type:["choice",["linear","ease-in","ease-out","ease-in-out"]]},target:{type:"proxy"}},Animation=function(e){function Animation(e){_classCallCheck(this,Animation);var t=_possibleConstructorReturn(this,(Animation.__proto__||Object.getPrototypeOf(Animation)).call(this));return t._create("tabris.Animation",e),t._nativeListen("completed",!0),t}return _inherits(Animation,NativeObject),_createClass(Animation,[{key:"_trigger",value:function _trigger(e,t){"completed"===e?(this.target.off("dispose",this.abort,this),this._resolve&&this._resolve(),this.dispose()):_get(Animation.prototype.__proto__||Object.getPrototypeOf(Animation.prototype),"_trigger",this).call(this,e,t)}},{key:"start",value:function start(e,t){this.target.on("dispose",this.abort,this),this._resolve=e,this._reject=t,this._nativeCall("start")}},{key:"abort",value:function abort(){this._reject&&this._reject(),this.dispose()}}]),Animation}();function animate(e,t){var r=this,n={};for(var i in e)if(ANIMATABLE_PROPERTIES.includes(i))try{n[i]=this._encodeProperty(this._getTypeDef(i),e[i]),this._storeProperty(i,n[i],t)}catch(e){warn(this+': Ignored invalid animation property value for "'+i+'"')}else warn(this+': Ignored invalid animation property "'+i+'"');for(var o in t)o in PROPERTIES||"name"===o||warn(this+': Ignored invalid animation option "'+o+'"');return new Promise(function(e,i){new Animation(Object.assign({},t,{target:r,properties:n})).start(e,i)})}NativeObject.defineProperties(Animation.prototype,PROPERTIES);var EVENT_TYPES$1=["touchStart","touchMove","touchEnd","touchCancel","resize"],Widget=function(e){function Widget(e){_classCallCheck(this,Widget);var t=_possibleConstructorReturn(this,(Widget.__proto__||Object.getPrototypeOf(Widget)).call(this));if(t.constructor===Widget)throw new Error("Cannot instantiate abstract Widget");return t._nativeType&&t._create(t._nativeType,e),t}return _inherits(Widget,NativeObject),_createClass(Widget,[{key:"append",value:function append(){var e=this;this._checkDisposed();var t=function(t){if(!(t instanceof NativeObject))throw new Error("Cannot append non-widget");t._setParent(e)};return arguments[0]instanceof WidgetCollection?arguments[0].toArray().forEach(t):Array.isArray(arguments[0])?arguments[0].forEach(t):Array.prototype.forEach.call(arguments,t),this}},{key:"appendTo",value:function appendTo(e){if(this._checkDisposed(),!((e=e instanceof WidgetCollection?e.first():e)instanceof NativeObject))throw new Error("Cannot append to non-widget");return this._setParent(e),this}},{key:"insertBefore",value:function insertBefore(e){if(this._checkDisposed(),!((e=e instanceof WidgetCollection?e.first():e)instanceof NativeObject))throw new Error("Cannot insert before non-widget");var t=e.parent();if(!t)throw new Error("Cannot insert before orphan");var r=t.$children.indexOf(e);return this._setParent(t,r),this}},{key:"insertAfter",value:function insertAfter(e){if(this._checkDisposed(),!((e=e instanceof WidgetCollection?e.first():e)instanceof NativeObject))throw new Error("Cannot insert after non-widget");var t=e.parent();if(!t)throw new Error("Cannot insert after orphan");var r=t.$children.indexOf(e);return this._setParent(t,r+1),this}},{key:"detach",value:function detach(){return this._checkDisposed(),this._setParent(null),this}},{key:"parent",value:function parent(){return this._parent||null}},{key:"children",value:function children(e){return this._children(e)}},{key:"siblings",value:function siblings(e){var t=this,siblings=this._parent?this._parent._children():[],r=siblings.filter(function(e){return e!==t});return new WidgetCollection(r,e)}},{key:"find",value:function find(e){return new WidgetCollection(this.children(),e,!0)}},{key:"apply",value:function apply(e){var t=new WidgetCollection(asArray(this.children()).concat(this),"*",!0);return this._apply(e,t)}},{key:"_getContainer",value:function _getContainer(){return this}},{key:"_children",value:function _children(e){return new WidgetCollection(this.$children,e)}},{key:"_find",value:function _find(e){return new WidgetCollection(this._children(),e,!0)}},{key:"_apply",value:function _apply(e,t){for(var r in 1===arguments.length&&(t=new WidgetCollection(asArray(this._children()).concat(this),"*",!0)),e["*"]&&t.set(e["*"]),e)"*"!==r&&"#"!==r[0]&&"."!==r[0]&&t.filter(r).set(e[r]);for(var n in e)"."===n[0]&&t.filter(n).set(e[n]);for(var i in e)"#"===i[0]&&t.filter(i).set(e[i]);return this}},{key:"_setParent",value:function _setParent(e,t){this._nativeSet("parent",e?types.proxy.encode(e._getContainer(this)):null),this._parent&&(this._parent._removeChild(this),Layout.addToQueue(this._parent)),this._parent=e,this._parent&&(this._parent._addChild(this,t),Layout.addToQueue(this._parent))}},{key:"_acceptChild",value:function _acceptChild(){return!1}},{key:"_addChild",value:function _addChild(e,t){if(!this._acceptChild(e))throw new Error(e+" could not be appended to "+this);this.$children||(this.$children=[]),"number"==typeof t?this.$children.splice(t,0,e):t=this.$children.push(e)-1,_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",this).call(this,"addChild",{child:e,index:t})}},{key:"_removeChild",value:function _removeChild(e){if(this.$children){var t=this.$children.indexOf(e);-1!==t&&(this.$children.splice(t,1),_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",this).call(this,"removeChild",{child:e,index:t}))}}},{key:"_release",value:function _release(){if(this.$children){for(var e=this.$children.concat(),t=0;t<e.length;t++)e[t]._dispose(!0);delete this.$children}this._parent&&(this._parent._removeChild(this),Layout.addToQueue(this._parent),delete this._parent)}},{key:"_listen",value:function _listen(e,t){var r=this;if(!this._isDisposed)if(this.gestures[e])if(t){var n=Object.assign({target:this},this.gestures[e]),i=new GestureRecognizer(n).on("gesture",function(t){t.translation&&(t.translationX=t.translation.x,t.translationY=t.translation.y),t.velocity&&(t.velocityX=t.velocity.x,t.velocityY=t.velocity.y),_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",r).call(r,e,t)});this._recognizers||(this._recognizers={}),this._recognizers[e]=i,this.on("dispose",i.dispose,i)}else this._recognizers&&e in this._recognizers&&(this._recognizers[e].dispose(),delete this._recognizers[e]);else"boundsChanged"===e?this._onoff("resize",t,this.$triggerChangeBounds):EVENT_TYPES$1.includes(e)?this._nativeListen(e,t):_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){var r=this;if("resize"!==e)return _get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",this).call(this,e,t);hasAndroidResizeBug()?setTimeout(function(){return _get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",r).call(r,e,types.bounds.decode(t.bounds))},0):_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",this).call(this,e,types.bounds.decode(t.bounds))}},{key:"$triggerChangeBounds",value:function $triggerChangeBounds(e){var{left:t,top:r,width:n,height:i}=e;_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",this).call(this,"boundsChanged",{value:{left:t,top:r,width:n,height:i}})}},{key:"_flushLayout",value:function _flushLayout(){this.$children&&this.$children.forEach(function(e){renderLayoutData.call(e)})}},{key:"data",get:function(){return this.$data||(this.$data={}),this.$data}},{key:"classList",get:function(){return this._classList||(this._classList=[]),this._classList}}]),Widget}();function hasAndroidResizeBug(){return"cache"in hasAndroidResizeBug||(hasAndroidResizeBug.cache="Android"===tabris.device.platform&&tabris.device.version<=17),hasAndroidResizeBug.cache}NativeObject.defineProperties(Widget.prototype,{enabled:{type:"boolean",default:!0},visible:{type:"boolean",default:!0},layoutData:{type:"layoutData",set:function(e,t){this._layoutData=t,this._parent&&Layout.addToQueue(this._parent)},get:function(){return this._layoutData||null}},left:{type:"edge",get:getLayoutProperty,set:setLayoutProperty},right:{type:"edge",get:getLayoutProperty,set:setLayoutProperty},top:{type:"edge",get:getLayoutProperty,set:setLayoutProperty},bottom:{type:"edge",get:getLayoutProperty,set:setLayoutProperty},width:{type:"dimension",get:getLayoutProperty,set:setLayoutProperty},height:{type:"dimension",get:getLayoutProperty,set:setLayoutProperty},centerX:{type:"dimension",get:getLayoutProperty,set:setLayoutProperty},centerY:{type:"dimension",get:getLayoutProperty,set:setLayoutProperty},baseline:{type:"sibling",get:getLayoutProperty,set:setLayoutProperty},elevation:{type:"number",default:0},font:{type:"font",set:function(e,t){this._nativeSet(e,void 0===t?null:t),this._storeProperty(e,t)},default:null},backgroundImage:{type:"image"},bounds:{type:"bounds",readonly:!0},background:{type:"color",set:function(e,t){this._nativeSet(e,void 0===t?null:t),this._storeProperty(e,t)}},opacity:{type:"opacity",default:1},transform:{type:"transform",default:function(){return{rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0}}},highlightOnTouch:{type:"boolean",default:!1},cornerRadius:{type:"number",default:0},id:{type:"string",set:function(e,t){this._storeProperty(e,t)},get:function(e){return this._getStoredProperty(e)}},class:{type:"string",set:function(e,t){this._classList=t.trim().split(/\s+/)},get:function(){return this.classList.join(" ")}},gestures:{set:function(e,t){this._gestures=Object.assign({},defaultGestures,t)},get:function(){return this._gestures||(this._gestures=Object.assign({},defaultGestures)),this._gestures}},win_theme:{type:["choice",["default","light","dark"]],default:"default"}}),Widget.prototype.animate=animate;var defaultGestures={tap:{type:"tap"},longpress:{type:"longpress"},pan:{type:"pan"},panLeft:{type:"pan",direction:"left"},panRight:{type:"pan",direction:"right"},panUp:{type:"pan",direction:"up"},panDown:{type:"pan",direction:"down"},panHorizontal:{type:"pan",direction:"horizontal"},panVertical:{type:"pan",direction:"vertical"},swipeLeft:{type:"swipe",direction:"left"},swipeRight:{type:"swipe",direction:"right"},swipeUp:{type:"swipe",direction:"up"},swipeDown:{type:"swipe",direction:"down"}};function renderLayoutData(){if(this._layoutData){var e=Layout.checkConsistency(this._layoutData);this._nativeSet("layoutData",Layout.resolveReferences(e,this))}}function setLayoutProperty(e,t){this._layoutData||(this._layoutData={}),null==t?delete this._layoutData[e]:this._layoutData[e]=t,this._parent&&Layout.addToQueue(this._parent)}function getLayoutProperty(e){return this._layoutData&&null!=this._layoutData[e]?this._layoutData[e]:null}function asArray(e){return e?e instanceof WidgetCollection?e.toArray():e:[]}var Composite=function(e){function Composite(){return _classCallCheck(this,Composite),_possibleConstructorReturn(this,(Composite.__proto__||Object.getPrototypeOf(Composite)).apply(this,arguments))}return _inherits(Composite,Widget),_createClass(Composite,[{key:"_acceptChild",value:function _acceptChild(){return!0}},{key:"_nativeType",get:function(){return"tabris.Composite"}}]),Composite}();NativeObject.defineProperties(Composite.prototype,{padding:{type:"boxDimensions",default:{left:0,right:0,top:0,bottom:0}}});var ContentView=function(e){function ContentView(){if(_classCallCheck(this,ContentView),!0!==arguments[0])throw new Error("ContentView can not be created");return _possibleConstructorReturn(this,(ContentView.__proto__||Object.getPrototypeOf(ContentView)).call(this))}return _inherits(ContentView,Composite),_createClass(ContentView,[{key:"_create",value:function _create(e,t){_get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),"_create",this).call(this,e,t),this._nativeSet("root",!0)}},{key:"_setParent",value:function _setParent(e,t){if(this._parent)throw new Error("Parent of ContentView can not be changed");_get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),"_setParent",this).call(this,e,t)}},{key:"_dispose",value:function _dispose(){throw new Error("ContentView can not be disposed")}}]),ContentView}();function create$4(){return new ContentView(!0)}var StatusBar=function(e){function StatusBar(){if(_classCallCheck(this,StatusBar),!0!==arguments[0])throw new Error("StatusBar can not be created");return _possibleConstructorReturn(this,(StatusBar.__proto__||Object.getPrototypeOf(StatusBar)).call(this))}return _inherits(StatusBar,Widget),_createClass(StatusBar,[{key:"_setParent",value:function _setParent(e,t){if(this._parent)throw new Error("Parent of StatusBar can not be changed");_get(StatusBar.prototype.__proto__||Object.getPrototypeOf(StatusBar.prototype),"_setParent",this).call(this,e,t)}},{key:"_dispose",value:function _dispose(){throw new Error("StatusBar can not be disposed")}},{key:"_nativeType",get:function(){return"tabris.StatusBar"}}]),StatusBar}();function create$5(){return new StatusBar(!0)}NativeObject.defineProperties(StatusBar.prototype,{theme:{type:["choice",["default","light","dark"]],default:"default"},displayMode:{type:["choice",["default","float","hide"]],default:"default"},height:{type:"number",readonly:!0},background:{type:"color",nocache:!0}});var NavigationBar=function(e){function NavigationBar(){if(_classCallCheck(this,NavigationBar),!0!==arguments[0])throw new Error("NavigationBar can not be created");return _possibleConstructorReturn(this,(NavigationBar.__proto__||Object.getPrototypeOf(NavigationBar)).call(this))}return _inherits(NavigationBar,Widget),_createClass(NavigationBar,[{key:"_setParent",value:function _setParent(e,t){if(this._parent)throw new Error("Parent of NavigationBar can not be changed");_get(NavigationBar.prototype.__proto__||Object.getPrototypeOf(NavigationBar.prototype),"_setParent",this).call(this,e,t)}},{key:"_dispose",value:function _dispose(){throw new Error("NavigationBar can not be disposed")}},{key:"_nativeType",get:function(){return"tabris.NavigationBar"}}]),NavigationBar}();function create$6(){return new NavigationBar(!0)}NativeObject.defineProperties(NavigationBar.prototype,{theme:{type:["choice",["default","light","dark"]],default:"default"},displayMode:{type:["choice",["default","float","hide"]],default:"default"},height:{type:"number",readonly:!0},background:{type:"color",nocache:!0}});var Drawer=function(e){function Drawer(){if(_classCallCheck(this,Drawer),!0!==arguments[0])throw new Error("Drawer can not be created");return _possibleConstructorReturn(this,(Drawer.__proto__||Object.getPrototypeOf(Drawer)).call(this))}return _inherits(Drawer,Composite),_createClass(Drawer,[{key:"_setParent",value:function _setParent(e,t){if(this._parent)throw new Error("Parent of Drawer can not be changed");_get(Drawer.prototype.__proto__||Object.getPrototypeOf(Drawer.prototype),"_setParent",this).call(this,e,t)}},{key:"_listen",value:function _listen(e,t){"open"===e||"close"===e?this._nativeListen(e,t):_get(Drawer.prototype.__proto__||Object.getPrototypeOf(Drawer.prototype),"_listen",this).call(this,e,t)}},{key:"_dispose",value:function _dispose(){throw new Error("Drawer can not be disposed")}},{key:"open",value:function open(){return this._nativeCall("open",{}),this}},{key:"close",value:function close(){return this._nativeCall("close",{}),this}},{key:"_nativeType",get:function(){return"tabris.Drawer"}}]),Drawer}();function create$7(){return new Drawer(!0)}NativeObject.defineProperties(Drawer.prototype,{enabled:{type:"boolean",default:!1},win_targetView:{type:"proxy"},win_displayMode:{type:["choice",["overlay","compactOverlay","inline","compactInline"]],default:"overlay"}});var Ui=function(e){function Ui(){if(_classCallCheck(this,Ui),!0!==arguments[0])throw new Error("Ui can not be created");var e=_possibleConstructorReturn(this,(Ui.__proto__||Object.getPrototypeOf(Ui)).call(this));return e.$appendNamedChild("contentView",create$4()),e.$appendNamedChild("statusBar",create$5()),e.$appendNamedChild("navigationBar",create$6()),e.$appendNamedChild("drawer",create$7()),e}return _inherits(Ui,Composite),_createClass(Ui,[{key:"_acceptChild",value:function _acceptChild(e){return e===this.contentView||e===this.statusBar||e===this.navigationBar||e===this.drawer}},{key:"$appendNamedChild",value:function $appendNamedChild(e,t){Object.defineProperty(this,e,{value:t}),this.append(t)}},{key:"_setParent",value:function _setParent(){throw new Error("Parent of tabris.ui can not be changed")}},{key:"_dispose",value:function _dispose(){throw new Error("Ui can not be disposed")}},{key:"_nativeType",get:function(){return"tabris.Ui"}}]),Ui}();function create$3(){return new Ui(!0)}NativeObject.defineProperties(Ui.prototype,{win_theme:{type:["choice",["default","light","dark"]],default:"light"}});var SUPPORTED_ENCODINGS=["ascii","utf-8"],TextEncoder=function(e){function TextEncoder(){_classCallCheck(this,TextEncoder);var e=_possibleConstructorReturn(this,(TextEncoder.__proto__||Object.getPrototypeOf(TextEncoder)).call(this));return e._create("tabris.TextEncoder"),e._nativeListen("result",!0),e._nativeListen("error",!0),e}return _inherits(TextEncoder,NativeObject),_createClass(TextEncoder,[{key:"encode",value:function encode(e,t){this._nativeCall("encode",{text:e,encoding:t})}}],[{key:"encode",value:function encode(e,t){return new Promise(function(r,n){if("string"!=typeof e)throw new Error("Invalid text, must be a string");if(t=t||"utf-8",!SUPPORTED_ENCODINGS.includes(t))throw new Error("Unsupported encoding: '"+t+"'");(new TextEncoder).on("result",function(e){var{target:t,data:n}=e;r(n),t.dispose()}).on("error",function(e){var{target:r}=e;n(new Error("Could not encode "+t)),r.dispose()}).encode(e,t)})}}]),TextEncoder}(),SUPPORTED_ENCODINGS$1=["ascii","utf-8"],TextDecoder=function(e){function TextDecoder(){_classCallCheck(this,TextDecoder);var e=_possibleConstructorReturn(this,(TextDecoder.__proto__||Object.getPrototypeOf(TextDecoder)).call(this));return e._create("tabris.TextDecoder"),e._nativeListen("result",!0),e._nativeListen("error",!0),e}return _inherits(TextDecoder,NativeObject),_createClass(TextDecoder,[{key:"decode",value:function decode(e,t){this._nativeCall("decode",{data:e,encoding:t})}}],[{key:"decode",value:function decode(e,t){return new Promise(function(r,n){if(ArrayBuffer.isView(e)&&(e=e.buffer),!(e instanceof ArrayBuffer))throw new Error("Invalid buffer type");if(t=t||"utf-8",!SUPPORTED_ENCODINGS$1.includes(t))throw new Error("Unsupported encoding: '"+t+"'");(new TextDecoder).on("result",function(e){var{target:t,string:n}=e;r(n),t.dispose()}).on("error",function(e){var{target:r}=e;n(new Error("Could not decode "+t)),r.dispose()}).decode(e,t)})}}]),TextDecoder}(),ERRORS={EACCES:"Permission denied",EEXIST:"File exists",ENOENT:"No such file or directory",EISDIR:"Is a directory",ENOTDIR:"Not a directory",ENOTEMPTY:"Directory not empty"},FileSystem=function(e){function FileSystem(){_classCallCheck(this,FileSystem);var e=_possibleConstructorReturn(this,(FileSystem.__proto__||Object.getPrototypeOf(FileSystem)).call(this,"tabris.FileSystem"));if(!0!==arguments[0])throw new Error("FileSystem can not be created");return e._create("tabris.FileSystem"),e}return _inherits(FileSystem,NativeObject),_createClass(FileSystem,[{key:"readFile",value:function readFile(e,t){var r=arguments,n=this;return new Promise(function(i,o){if(r.length<1)throw new Error("Not enough arguments to readFile");n._nativeCall("readFile",{path:checkPath(e),onError:function(t){return o(createError(t,e))},onSuccess:function(e){return t?TextDecoder.decode(e,t).then(i,o):i(e)}})})}},{key:"writeFile",value:function writeFile(e,t,r){var n=arguments,i=this;return new Promise(function(o,a){if(n.length<2)throw new Error("Not enough arguments to writeFile");var s=function(t){return i._nativeCall("writeFile",{path:checkPath(e),data:checkBuffer(t),onError:function(t){return a(createError(t,e))},onSuccess:function(){return o()}})};"string"==typeof t?TextEncoder.encode(t,r||"utf-8").then(s,a):s(t)})}},{key:"removeFile",value:function removeFile(e){var t=arguments,r=this;return new Promise(function(n,i){if(t.length<1)throw new Error("Not enough arguments to removeFile");r._nativeCall("removeFile",{path:checkPath(e),onError:function(t){return i(createError(t,e))},onSuccess:function(){return n()}})})}},{key:"readDir",value:function readDir(e){var t=arguments,r=this;return new Promise(function(n,i){if(t.length<1)throw new Error("Not enough arguments to readDir");r._nativeCall("readDir",{path:checkPath(e),onError:function(t){return i(createError(t,e))},onSuccess:function(e){return n(e)}})})}},{key:"dispose",value:function dispose(){throw new Error("Cannot dispose fs object")}},{key:"filesDir",get:function(){return this._nativeGet("filesDir")}},{key:"cacheDir",get:function(){return this._nativeGet("cacheDir")}}]),FileSystem}();function create$8(){return new FileSystem(!0)}function createError(e,t){var r=(ERRORS[e]||e)+": "+t,n=e in ERRORS?e:null,i=new Error(r);return Object.defineProperties(i,{path:{value:t},code:{value:n}}),i}function checkPath(e){try{return normalizePath(e)}catch(e){throw new Error("Invalid file name: "+e.message)}}function checkBuffer(e){if(ArrayBuffer.isView(e)&&(e=e.buffer),!(e instanceof ArrayBuffer))throw new Error("Invalid buffer type");return e}var PHASE_CONSTANTS={NONE:{value:0},CAPTURING_PHASE:{value:1},AT_TARGET:{value:2},BUBBLING_PHASE:{value:3}},Event=function(){function Event(e,t){if(_classCallCheck(this,Event),arguments.length<1)throw new Error("Not enough arguments to Event");this.$timeStamp=Date.now(),this.$type=e||"",this.$bubbles=t&&!!t.bubbles||!1,this.$cancelable=t&&!!t.cancelable||!1,this.$target=null,this.$defaultPrevented=!1}return _createClass(Event,[{key:"initEvent",value:function initEvent(e,t,r){if(arguments.length<3)throw new Error("Not enough arguments to initEvent");this.$type=e+"",this.$bubbles=!!t,this.$cancelable=!!r}},{key:"stopPropagation",value:function stopPropagation(){}},{key:"stopImmediatePropagation",value:function stopImmediatePropagation(){}},{key:"preventDefault",value:function preventDefault(){this.$cancelable&&(this.$defaultPrevented=!0)}},{key:"type",get:function(){return this.$type}},{key:"timeStamp",get:function(){return this.$timeStamp}},{key:"bubbles",get:function(){return this.$bubbles}},{key:"cancelable",get:function(){return this.$cancelable}},{key:"target",get:function(){return this.$target}},{key:"currentTarget",get:function(){return this.$target}},{key:"defaultPrevented",get:function(){return this.$defaultPrevented}},{key:"eventPhase",get:function(){return 0}},{key:"isTrusted",get:function(){return!1}}]),Event}();function addDOMEventTargetMethods(e){if("function"!=typeof e.addEventListener){var t=void 0;e.addEventListener=function(e,r){if(arguments.length<2)throw new Error("Not enough arguments to addEventListener");t||(t=[]),e in t||(t[e]=[]),t[e].includes(r)||t[e].push(r)},e.removeEventListener=function(e,r){if(arguments.length<2)throw new Error("Not enough arguments to removeEventListener");if(t&&e in t){var n=t[e].indexOf(r);-1!==n&&t[e].splice(n,1)}},e.dispatchEvent=function(r){if(arguments.length<1)throw new Error("Not enough arguments to dispatchEvent");if(!(r instanceof Event))throw new Error("Invalid event given to dispatchEvent");if(r.$target=e,t&&r.type in t)for(var n of t[r.type])n.call(this,r);return!r.defaultPrevented}}}function defineEventHandlerProperties(e,t){t.forEach(function(t){return defineEventHandlerProperty(e,t)})}function defineEventHandlerProperty(e,t){var r="on"+t,n=null;Object.defineProperty(e,r,{get:function(){return n},set:function(r){"function"==typeof r&&(n&&e.removeEventListener(t,n),n=r,e.addEventListener(t,n))}})}function addDOMDocument(e){var t=function(){function HTMLElement(e){_classCallCheck(this,HTMLElement),this.tagName=(e||"").toUpperCase(),this.children=[]}return _createClass(HTMLElement,[{key:"setAttribute",value:function setAttribute(){}},{key:"appendChild",value:function appendChild(t){return this.children.push(t),handleElementInserted(this,t,e),t}},{key:"cloneNode",value:function cloneNode(){return new HTMLElement}},{key:"lastChild",value:function lastChild(){return new HTMLElement}}]),HTMLElement}();e.document={documentElement:{},createDocumentFragment:function(){return new t},createElement:function(e){return new t(e)},location:{href:""},readyState:"loading",head:new t("head"),getElementsByTagName:function(e){return this.head.children.filter(function(t){return t.tagName===e.toUpperCase()})},createEvent:function(e){return new Event(e)}},addDOMEventTargetMethods(e.document),void 0===e.location&&(e.location=e.document.location),tabris.once("start",function(){e.document.readyState="complete";var t=new Event("DOMContentLoaded",!1,!1);e.document.dispatchEvent(t)})}function handleElementInserted(e,t,r){if("HEAD"===e.tagName&&"SCRIPT"===t.tagName&&t.src){var n=void 0;try{n=tabris._client.loadAndExecute(t.src,"","")}catch(e){return error("Error loading "+t.src+":",e),log(e.stack),void("function"==typeof t.onerror&&t.onerror.call(r,e))}n.loadError?"function"==typeof t.onerror&&t.onerror.call(r,new Error("Could not load "+t.src)):"function"==typeof t.onload&&t.onload.call(r)}}Object.defineProperties(Event,PHASE_CONSTANTS),Object.defineProperties(Event.prototype,PHASE_CONSTANTS);var Timer=function(e){function Timer(e){_classCallCheck(this,Timer);var t=_possibleConstructorReturn(this,(Timer.__proto__||Object.getPrototypeOf(Timer)).call(this));return t._create("tabris.Timer",e),t._nativeListen("run",!0),t}return _inherits(Timer,NativeObject),Timer}();function addWindowTimerMethods(e){if("function"!=typeof e.setTimeout){var t=0,r={};e.setTimeout=function(e,t){if(arguments.length<1)throw new TypeError("Not enough arguments to setTimeout");if("function"!=typeof e)throw new TypeError("Illegal argument to setTimeout: not a function");var r=Array.prototype.slice.call(arguments,2);return createTimer(e,adjustDelay(t),!1,r)},e.setInterval=function(e,t){if(arguments.length<1)throw new TypeError("Not enough arguments to setInterval");if("function"!=typeof e)throw new TypeError("Illegal argument to setInterval: not a function");var r=Array.prototype.slice.call(arguments,2);return createTimer(e,adjustDelay(t),!0,r)},e.clearTimeout=e.clearInterval=function(e){var t=r[e];t&&(t._nativeCall("cancel",{}),t.dispose(),delete r[e])}}function createTimer(n,i,o,a){var s=t++,c=function(){var t=new Timer({delay:i,repeat:o}).on("run",function(){n.apply(e,a),o||(t.dispose(),delete r[s])});t._nativeCall("start"),r[s]=t};return tabris.started?c():tabris.once("start",c),s}}function adjustDelay(e){return"number"==typeof e&&isFinite(e)?Math.max(0,Math.round(e)):0}NativeObject.defineProperties(Timer.prototype,{delay:"any",repeat:"any"});var ClientStore=function(e){function ClientStore(){_classCallCheck(this,ClientStore);var e=_possibleConstructorReturn(this,(ClientStore.__proto__||Object.getPrototypeOf(ClientStore)).call(this));return e._create("tabris.ClientStore"),e}return _inherits(ClientStore,NativeObject),ClientStore}(),SecureStore=function(e){function SecureStore(){_classCallCheck(this,SecureStore);var e=_possibleConstructorReturn(this,(SecureStore.__proto__||Object.getPrototypeOf(SecureStore)).call(this));return e._create("tabris.SecureStore"),e}return _inherits(SecureStore,NativeObject),SecureStore}(),Storage=function(){function Storage(){_classCallCheck(this,Storage);var e=arguments[0];if(!(e instanceof NativeObject))throw new Error("Cannot instantiate Storage");Object.defineProperty(this,"_proxy",{value:e})}return _createClass(Storage,[{key:"setItem",value:function setItem(e,t){if(arguments.length<2)throw new TypeError("Not enough arguments to 'setItem'");this._proxy._nativeCall("add",{key:encode(e),value:encode(t)})}},{key:"getItem",value:function getItem(e){if(arguments.length<1)throw new TypeError("Not enough arguments to 'getItem'");var t=this._proxy._nativeCall("get",{key:encode(e)});return void 0===t?null:t}},{key:"removeItem",value:function removeItem(e){if(arguments.length<1)throw new TypeError("Not enough arguments to 'removeItem'");this._proxy._nativeCall("remove",{keys:[encode(e)]})}},{key:"clear",value:function clear(){this._proxy._nativeCall("clear")}}]),Storage}();function encode(e){return""+e}function create$9(e){var t=e?new SecureStore:new ClientStore;return new Storage(t)}function createElement(e,t){for(var r=typeToConstructor(e),n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var a=flattenChildren(i).filter(function(e){return e instanceof Widget});if(r===WidgetCollection){if(t)throw new Error("JSX: WidgetCollection can not have attributes");return new WidgetCollection(a)}var s=new r(getPropertiesMap(t||{},i),i);if(s instanceof WidgetCollection)return s;if(s instanceof Widget)return s.on(getListenersMap(t||{})),s.append.apply(s,a);throw new Error(("JSX: Unsupported type "+r.name).trim())}function typeToConstructor(e){if(e instanceof Function)return e;var t=e.charAt(0).toUpperCase()+e.slice(1),r=global.tabris[t];if(!(r instanceof Function))throw new Error(("JSX: Unsupported type "+e).trim());return r}function flattenChildren(e){var t=[];for(var r of e)r instanceof WidgetCollection?t=t.concat(flattenChildren(r.toArray())):t.push(r);return t}function getPropertiesMap(e,t){var r=omit(e,Object.keys(e).filter(isEventAttribute)),n=t.filter(function(e){return"string"==typeof e});return n.length&&(r.text=n.join(" ")),r}function getListenersMap(e){var t={};for(var r in e){if(isEventAttribute(r))t[r[2].toLocaleLowerCase()+r.slice(3)]=e[r]}return t}function isEventAttribute(e){return e.startsWith("on")&&e.charCodeAt(2)<=90}var JSX=Object.freeze({createElement:createElement}),Action=function(e){function Action(){return _classCallCheck(this,Action),_possibleConstructorReturn(this,(Action.__proto__||Object.getPrototypeOf(Action)).apply(this,arguments))}return _inherits(Action,Widget),_createClass(Action,[{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):_get(Action.prototype.__proto__||Object.getPrototypeOf(Action.prototype),"_listen",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.Action"}}]),Action}();NativeObject.defineProperties(Action.prototype,{image:{type:"image",default:null},placementPriority:{type:["choice",["low","high","normal"]],set:function(e,t){this._nativeSet(e,t.toUpperCase()),this._storeProperty(e,t)},default:"normal"},title:{type:"string",default:""},win_symbol:{type:"string",default:""}});var Popup=function(e){function Popup(){return _classCallCheck(this,Popup),_possibleConstructorReturn(this,(Popup.__proto__||Object.getPrototypeOf(Popup)).apply(this,arguments))}return _inherits(Popup,NativeObject),_createClass(Popup,[{key:"open",value:function open(){if(this.isDisposed())throw new Error("Can not open a popup that was disposed");return this._nativeCall("open"),this}},{key:"close",value:function close(){return this._autoDispose&&this.dispose(),this}}]),Popup}(),ActionSheet=function(e){function ActionSheet(e){_classCallCheck(this,ActionSheet);var t=_possibleConstructorReturn(this,(ActionSheet.__proto__||Object.getPrototypeOf(ActionSheet)).call(this));return t._autoDispose=!0,t._create("tabris.ActionSheet",e),t}return _inherits(ActionSheet,Popup),_createClass(ActionSheet,[{key:"_trigger",value:function _trigger(e,t){if("close"!==e)return _get(ActionSheet.prototype.__proto__||Object.getPrototypeOf(ActionSheet.prototype),"_trigger",this).call(this,e,t);_get(ActionSheet.prototype.__proto__||Object.getPrototypeOf(ActionSheet.prototype),"_trigger",this).call(this,"close",t),this.dispose()}},{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):"close"===e?this._nativeListen(e,t):_get(ActionSheet.prototype.__proto__||Object.getPrototypeOf(ActionSheet.prototype),"_listen",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.ActionSheet"}}]),ActionSheet}();NativeObject.defineProperties(ActionSheet.prototype,{title:{type:"string",default:""},message:{type:"string",default:""},actions:{type:{encode:function(e){if(!Array.isArray(e))throw new Error("value is not an array");return e.map(function(e){var t={title:""+e.title};if("image"in e&&(t.image=types.image.encode(e.image)),"style"in e){if(!["default","cancel","destructive"].includes(e.style))throw new Error("Invalid action style");t.style=e.style}return t})}},default:function(){return[]}}});var ActivityIndicator=function(e){function ActivityIndicator(){return _classCallCheck(this,ActivityIndicator),_possibleConstructorReturn(this,(ActivityIndicator.__proto__||Object.getPrototypeOf(ActivityIndicator)).apply(this,arguments))}return _inherits(ActivityIndicator,Widget),_createClass(ActivityIndicator,[{key:"_nativeType",get:function(){return"tabris.ActivityIndicator"}}]),ActivityIndicator}();NativeObject.defineProperties(ActivityIndicator.prototype,{tintColor:{type:"color"}});var AlertDialog=function(e){function AlertDialog(e){_classCallCheck(this,AlertDialog);var t=_possibleConstructorReturn(this,(AlertDialog.__proto__||Object.getPrototypeOf(AlertDialog)).call(this));return t._create("tabris.AlertDialog",e),t._nativeListen("close",!0),t._autoDispose=!0,t}return _inherits(AlertDialog,Popup),_createClass(AlertDialog,[{key:"_trigger",value:function _trigger(e,t){if("close"!==e)return _get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),"_trigger",this).call(this,e,t);t.button=t.button||"",t.button&&_get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),"_trigger",this).call(this,"close"+capitalizeFirstChar(t.button),t),_get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),"_trigger",this).call(this,"close",t),this.dispose()}}]),AlertDialog}();NativeObject.defineProperties(AlertDialog.prototype,{title:{type:"string",default:""},message:{type:"string",default:""},buttons:{type:{encode:function(e){if("object"!=typeof e)throw new Error("value is not an object");var t={};return"ok"in e&&(t.ok=e.ok+""),"cancel"in e&&(t.cancel=e.cancel+""),"neutral"in e&&(t.neutral=e.neutral+""),t}},default:function(){return{}}}});var Button=function(e){function Button(){return _classCallCheck(this,Button),_possibleConstructorReturn(this,(Button.__proto__||Object.getPrototypeOf(Button)).apply(this,arguments))}return _inherits(Button,Widget),_createClass(Button,[{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):_get(Button.prototype.__proto__||Object.getPrototypeOf(Button.prototype),"_listen",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.Button"}}]),Button}();NativeObject.defineProperties(Button.prototype,{alignment:{type:["choice",["left","right","center"]],default:"center"},image:{type:"image",default:null},text:{type:"string",default:""},textColor:{type:"color"}});var ImageData=function ImageData(){if(_classCallCheck(this,ImageData),arguments.length<2)throw new TypeError("Not enough arguments to ImageData");var e=void 0,t=void 0,r=void 0;if(arguments[0]instanceof Uint8ClampedArray){if(e=checkArray(arguments[0]),t=checkSize(arguments[1]),r=arguments.length>2?checkSize(arguments[2]):e.byteLength/4/t,e.byteLength!==t*r*4)throw new Error("Wrong array size")}else t=checkSize(arguments[0]),r=checkSize(arguments[1]),e=new Uint8ClampedArray(t*r*4);Object.defineProperties(this,{data:{value:e},width:{value:t},height:{value:r}})};function checkArray(e){if(e.byteLength%4!=0)throw new Error("Illegal array length");return e}function checkSize(e){var t=Math.floor(e);if(t<=0||!isFinite(t))throw new Error("Illegal size for ImageData");return t}var OPCODES={arc:1,arcTo:2,beginPath:3,bezierCurveTo:4,clearRect:5,closePath:6,fill:7,fillRect:8,fillStyle:9,fillText:10,lineCap:11,lineJoin:12,lineTo:13,lineWidth:14,moveTo:15,quadraticCurveTo:16,rect:17,restore:18,rotate:19,save:20,scale:21,setTransform:22,stroke:23,strokeRect:24,strokeStyle:25,strokeText:26,textAlign:27,textBaseline:28,transform:29,translate:30,font:31},GC=function(e){function GC(e){_classCallCheck(this,GC);var t=_possibleConstructorReturn(this,(GC.__proto__||Object.getPrototypeOf(GC)).call(this));t._create("tabris.GC",e),t._operations=[],t._doubles=[],t._booleans=[],t._strings=[],t._ints=[];var r=function(){return t.flush()};return tabris.on("flush",r),t.on("dispose",function(){return tabris.off("flush",r)}),t}return _inherits(GC,NativeObject),_createClass(GC,[{key:"init",value:function init(e){this._nativeCall("init",e)}},{key:"getImageData",value:function getImageData(e,t,r,n){var i=this._nativeCall("getImageData",{x:e,y:t,width:r,height:n});return i instanceof Uint8ClampedArray?i:new Uint8ClampedArray(i)}},{key:"putImageData",value:function putImageData(e,t,r){this._nativeCall("putImageData",{data:e.data,width:e.width,height:e.height,x:t,y:r})}},{key:"addOperation",value:function addOperation(e){var t=OPCODES[e];if(!t)throw new Error("Invalid operation");this._operations.push(t)}},{key:"addBoolean",value:function addBoolean(){Array.prototype.push.apply(this._booleans,arguments)}},{key:"addDouble",value:function addDouble(){Array.prototype.push.apply(this._doubles,arguments)}},{key:"addInt",value:function addInt(){Array.prototype.push.apply(this._ints,arguments)}},{key:"addString",value:function addString(){Array.prototype.push.apply(this._strings,arguments)}},{key:"flush",value:function flush(){this._operations.length>0&&(this._nativeCall("draw",{packedOperations:[this._operations,this._doubles,this._booleans,this._strings,this._ints]}),this._operations=[],this._doubles=[],this._booleans=[],this._strings=[],this._ints=[])}}]),GC}();NativeObject.defineProperties(GC.prototype,{parent:"proxy"});var CanvasContext=function(){function CanvasContext(e){for(var t in _classCallCheck(this,CanvasContext),this._gc=e,this._state=createState(),this._savedStates=[],this.canvas={width:0,height:0,style:{}},properties)defineProperty(this,t)}return _createClass(CanvasContext,[{key:"measureText",value:function measureText(e){return{width:5*e.length+5}}},{key:"getImageData",value:function getImageData(e,t,r,n){checkRequiredArgs(arguments,4,"CanvasContext.getImageData"),this._gc.flush();var i=this._gc.getImageData(e,t,r,n);return new ImageData(i,r,n)}},{key:"putImageData",value:function putImageData(e,t,r){checkRequiredArgs(arguments,3,"CanvasContext.putImageData"),this._gc.flush(),this._gc.putImageData(e,t,r)}},{key:"createImageData",value:function createImageData(e,t){if(arguments[0]instanceof ImageData){var r=arguments[0];e=r.width,t=r.height}else checkRequiredArgs(arguments,2,"CanvasContext.createImageData");return new ImageData(e,t)}},{key:"_init",value:function _init(e,t){this.canvas.width=e,this.canvas.height=t,this._gc.init({width:e,height:t})}}]),CanvasContext}();defineMethod("save",0,function(){this._savedStates.push(Object.assign({},this._state))}),defineMethod("restore",0,function(){this._state=this._savedStates.pop()||this._state}),defineMethod("beginPath"),defineMethod("closePath"),defineMethod("lineTo",2,function(e,t){this._gc.addDouble(e,t)}),defineMethod("moveTo",2,function(e,t){this._gc.addDouble(e,t)}),defineMethod("bezierCurveTo",6,function(e,t,r,n,i,o){this._gc.addDouble(e,t,r,n,i,o)}),defineMethod("quadraticCurveTo",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("rect",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("arc",5,function(e,t,r,n,i,o){this._gc.addDouble(e,t,r,n,i),this._gc.addBoolean(!!o)}),defineMethod("arcTo",5,function(e,t,r,n,i){this._gc.addDouble(e,t,r,n,i)}),defineMethod("scale",2,function(e,t){this._gc.addDouble(e,t)}),defineMethod("rotate",1,function(e){this._gc.addDouble(e)}),defineMethod("translate",2,function(e,t){this._gc.addDouble(e,t)}),defineMethod("transform",6,function(e,t,r,n,i,o){this._gc.addDouble(e,t,r,n,i,o)}),defineMethod("setTransform",6,function(e,t,r,n,i,o){this._gc.addDouble(e,t,r,n,i,o)}),defineMethod("clearRect",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("fillRect",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("strokeRect",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("fillText",3,function(e,t,r){this._gc.addString(e),this._gc.addBoolean(!1,!1,!1),this._gc.addDouble(t,r)}),defineMethod("strokeText",3,function(e,t,r){this._gc.addString(e),this._gc.addBoolean(!1,!1,!1),this._gc.addDouble(t,r)}),defineMethod("fill"),defineMethod("stroke"),CanvasContext.getContext=function(e,t,r){return e._gc||(e._gc=new GC({parent:e})),e._ctx||(e._ctx=new CanvasContext(e._gc)),e._ctx._init(t,r),e._ctx};var properties={lineWidth:{init:1,encode:function(e){if(e>0)return e;throw new Error(e)},decode:passThrough,addOperations:function(e){this._gc.addDouble(e)}},lineCap:{init:"butt",values:toObject(["butt","round","square"]),encode:checkValue$1,decode:passThrough,addOperations:function(e){this._gc.addString(e)}},lineJoin:{init:"miter",values:toObject(["bevel","miter","round"]),encode:checkValue$1,decode:passThrough,addOperations:function(e){this._gc.addString(e)}},fillStyle:{init:[0,0,0,255],encode:colorStringToArray,decode:colorArrayToString,addOperations:function(e){this._gc.addInt(e[0],e[1],e[2],e[3])}},strokeStyle:{init:[0,0,0,255],encode:colorStringToArray,decode:colorArrayToString,addOperations:function(e){this._gc.addInt(e[0],e[1],e[2],e[3])}},textAlign:{init:"start",values:toObject(["start","end","left","right","center"]),encode:checkValue$1,decode:passThrough,addOperations:function(e){this._gc.addString(e)}},textBaseline:{init:"alphabetic",values:toObject(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:checkValue$1,decode:passThrough,addOperations:function(e){this._gc.addString(e)}},font:{init:{family:["sans-serif"],size:12,weight:"normal",style:"normal"},encode:fontStringToObject,decode:fontObjectToString,addOperations:function(e){this._gc.addString(e.family.join(", "),e.style,e.weight),this._gc.addDouble(e.size)}}};function passThrough(e){return e}function checkValue$1(e){if(e in this.values)return e;throw new Error(e)}function toObject(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function createState(){var e={};for(var t in properties)e[t]=properties[t].init;return e}function defineMethod(e,t,r){CanvasContext.prototype[e]=function(){checkRequiredArgs(arguments,t,"CanvasContext."+e),this._gc.addOperation(e),r&&r.apply(this,arguments)}}function defineProperty(e,t){var r=properties[t];Object.defineProperty(e,t,{get:function(){return r.decode(e._state[t])},set:function(n){try{e._state[t]=r.encode(n),e._gc.addOperation(t),r.addOperations.call(e,e._state[t])}catch(e){warn("Unsupported value for "+t+": "+n)}}})}function checkRequiredArgs(e,t,r){if(e.length<t)throw new Error("Not enough arguments to "+r)}var Canvas=function(e){function Canvas(){return _classCallCheck(this,Canvas),_possibleConstructorReturn(this,(Canvas.__proto__||Object.getPrototypeOf(Canvas)).apply(this,arguments))}return _inherits(Canvas,Composite),_createClass(Canvas,[{key:"getContext",value:function getContext(e,t,r){return"2d"===e?CanvasContext.getContext(this,t,r):null}},{key:"_nativeType",get:function(){return"tabris.Canvas"}}]),Canvas}(),CheckBox=function(e){function CheckBox(){return _classCallCheck(this,CheckBox),_possibleConstructorReturn(this,(CheckBox.__proto__||Object.getPrototypeOf(CheckBox)).apply(this,arguments))}return _inherits(CheckBox,Widget),_createClass(CheckBox,[{key:"_listen",value:function _listen(e,t){"checkedChanged"===e?this._onoff("select",t,this.$triggerChangeChecked):"select"===e?this._nativeListen(e,t):_get(CheckBox.prototype.__proto__||Object.getPrototypeOf(CheckBox.prototype),"_listen",this).call(this,e,t)}},{key:"$triggerChangeChecked",value:function $triggerChangeChecked(e){var{checked:t}=e;this._triggerChangeEvent("checked",t)}},{key:"_nativeType",get:function(){return"tabris.CheckBox"}}]),CheckBox}();NativeObject.defineProperties(CheckBox.prototype,{text:{type:"string",default:""},checked:{type:"boolean",nocache:!0},textColor:{type:"color"},tintColor:{type:"color"},checkedTintColor:{type:"color"}});var EVENT_TYPES$2=["refresh","select","scroll"],CollectionView=function(e){function CollectionView(e){_classCallCheck(this,CollectionView);var t=_possibleConstructorReturn(this,(CollectionView.__proto__||Object.getPrototypeOf(CollectionView)).call(this,e));return t._nativeListen("requestInfo",!0),t._nativeListen("createCell",!0),t._nativeListen("updateCell",!0),tabris.on("flush",t.$flush,t),t.on("dispose",function(){return tabris.off("flush",t.$flush,t)}),t}return _inherits(CollectionView,Composite),_createClass(CollectionView,[{key:"load",value:function load(e){if(!isNumber$1(e)||e<0)throw new Error("Invalid itemCount");this._storeProperty("itemCount",e),this._needsReload=!0}},{key:"reveal",value:function reveal(e){(e=this.$checkIndex(e))>=0&&e<this.itemCount&&(this.$flush(),this._nativeCall("reveal",{index:e}))}},{key:"refresh",value:function refresh(e){if(0===arguments.length)return this.$flush(),void this._nativeCall("refresh",{index:0,count:this.itemCount});(e=this.$checkIndex(e))>=0&&e<this.itemCount&&(this.$flush(),this._nativeCall("refresh",{index:e,count:1}))}},{key:"insert",value:function insert(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e=Math.min(Math.max(0,this.$checkIndex(e)),this.itemCount),!isNumber$1(t)||t<=0)throw new Error("Invalid insert count");this._storeProperty("itemCount",this.itemCount+t),this.$flush(),this._nativeCall("insert",{index:e,count:t})}},{key:"remove",value:function remove(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e=this.$checkIndex(e),!(isNumber$1(t)&&t>=0))throw new Error("Invalid remove count");t=Math.min(t,this.itemCount-e),e>=0&&e<this.itemCount&&t>0&&(this._storeProperty("itemCount",this.itemCount-t),this.$flush(),this._nativeCall("remove",{index:e,count:t}))}},{key:"$flush",value:function $flush(){this._needsReload&&(delete this._needsReload,this._nativeCall("load",{itemCount:this.itemCount}))}},{key:"$checkIndex",value:function $checkIndex(e){if(!isNumber$1(e))throw new Error("Invalid index");return e<0?e+this.itemCount:e}},{key:"_listen",value:function _listen(e,t){"firstVisibleIndexChanged"===e?this._onoff("scroll",t,triggerChangeFirstVisibleIndex):"lastVisibleIndexChanged"===e?this._onoff("scroll",t,triggerChangeLastVisibleIndex):EVENT_TYPES$2.includes(e)?this._nativeListen(e,t):_get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){if("requestInfo"===e){var r=resolveProperty(this,"cellType",t.index),n=resolveProperty(this,"cellHeight",t.index,r);return{type:encodeCellType(this,r),height:encodeCellHeight(n)}}return"createCell"===e?this.$createCell(t.type).cid:"updateCell"!==e?"select"===e?_get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),"_trigger",this).call(this,"select",{index:t.index}):_get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),"_trigger",this).call(this,e,t):void this.updateCell(tabris._proxies.find(t.widget),t.index)}},{key:"$createCell",value:function $createCell(e){var t=this.createCell(decodeCellType(this,e));if(!(t instanceof Widget))throw new Error("Created cell is not a widget");if(t._parent)throw new Error("Created cell already has a parent");return t._parent=this,this._addChild(t),t._setParent=function(){return warn("Cannot re-parent collection view cell")},t.dispose=function(){return warn("Cannot dispose of collection view cell")},t}},{key:"_nativeType",get:function(){return"tabris.CollectionView"}}]),CollectionView}();function resolveProperty(e,t){var r=e[t];return"function"==typeof r?r.apply(null,Array.prototype.slice.call(arguments,2)):r}function encodeCellType(e,t){var r=e._cellTypes||(e._cellTypes=[]),n=r.indexOf(t);return-1===n&&(n+=r.push(t)),n}function decodeCellType(e,t){return(e._cellTypes||[])[t]||null}function encodeCellHeight(e){return"auto"===e?-1:isNumber$1(e)?Math.max(-1,e):void warn("Invalid cell height: "+e)}NativeObject.defineProperties(CollectionView.prototype,{itemCount:{type:"natural",default:0,set:function(e,t){this._storeProperty(e,t),this._needsReload=!0}},cellType:{type:"any",default:null,set:function(e,t){t!==this.cellType&&(this._storeProperty(e,t),this._needsReload=!0)}},cellHeight:{type:"any",default:"auto",set:function(e,t){t!==this.cellHeight&&(this._storeProperty(e,t),this._needsReload=!0)}},createCell:{type:"function",default:function(){return function(){return new Composite}},set:function(e,t){t!==this.createCell&&(this._storeProperty(e,t),this._needsReload=!0)}},updateCell:{type:"function",default:function(){return function(){}},set:function(e,t){t!==this.updateCell&&(this._storeProperty(e,t),this._needsReload=!0)}},refreshEnabled:{type:"boolean",default:!1},refreshIndicator:{type:"boolean",nocache:!0},refreshMessage:{type:"string",default:""},firstVisibleIndex:{type:"number",readonly:!0},lastVisibleIndex:{type:"number",readonly:!0},columnCount:{type:"number",default:1}});var triggerChangeFirstVisibleIndex=createDelegate("firstVisibleIndex"),triggerChangeLastVisibleIndex=createDelegate("lastVisibleIndex");function createDelegate(e){return function(){var t=this.get(e);t!==this["_prev:"+e]&&this._triggerChangeEvent(e,t),this["_prev:"+e]=t}}function isNumber$1(e){return"number"==typeof e&&isFinite(e)}var Crypto=function(e){function Crypto(){_classCallCheck(this,Crypto);var e=_possibleConstructorReturn(this,(Crypto.__proto__||Object.getPrototypeOf(Crypto)).call(this));return e._create("tabris.Crypto"),e}return _inherits(Crypto,NativeObject),_createClass(Crypto,[{key:"getRandomValues",value:function getRandomValues(e){if(0===arguments.length)throw new Error("Not enough arguments to Crypto.getRandomValues");if(!isIntArray(e))throw new Error("Unsupported type in Crypto.getRandomValues");var t=e.byteLength,r=new Uint8Array(this._nativeCall("getRandomValues",{byteLength:t}));if(r.byteLength!==t)throw new Error("Not enough random bytes available");new Uint8Array(e.buffer).set(r)}}]),Crypto}();function isIntArray(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array}var DateDialog=function(e){function DateDialog(e){_classCallCheck(this,DateDialog);var t=_possibleConstructorReturn(this,(DateDialog.__proto__||Object.getPrototypeOf(DateDialog)).call(this));return t._create("tabris.DateDialog",e),t._nativeListen("close",!0),t._autoDispose=!0,t}return _inherits(DateDialog,Popup),_createClass(DateDialog,[{key:"_trigger",value:function _trigger(e,t){if("close"===e)this._handleCloseEvent(t);else{if("select"!==e)return _get(DateDialog.prototype.__proto__||Object.getPrototypeOf(DateDialog.prototype),"_trigger",this).call(this,e,t);t.date=new Date(t.date),_get(DateDialog.prototype.__proto__||Object.getPrototypeOf(DateDialog.prototype),"_trigger",this).call(this,"select",t),this._handleCloseEvent(t)}}},{key:"_handleCloseEvent",value:function _handleCloseEvent(e){_get(DateDialog.prototype.__proto__||Object.getPrototypeOf(DateDialog.prototype),"_trigger",this).call(this,"close",e),this.dispose()}},{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):"close"===e?this._nativeListen(e,t):_get(DateDialog.prototype.__proto__||Object.getPrototypeOf(DateDialog.prototype),"_listen",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.DateDialog"}}]),DateDialog}();function setDate(e,t){if(!(t instanceof Date))throw new Error("date is not of type Date");this._nativeSet(e,t.getTime()),this._storeProperty(e,t)}NativeObject.defineProperties(DateDialog.prototype,{date:{type:"any",default:void 0,set:setDate},maxDate:{type:"any",default:void 0,set:setDate},minDate:{type:"any",default:void 0,set:setDate}});var EVENT_TYPES$3=["load","zoom"],ImageView=function(e){function ImageView(){return _classCallCheck(this,ImageView),_possibleConstructorReturn(this,(ImageView.__proto__||Object.getPrototypeOf(ImageView)).apply(this,arguments))}return _inherits(ImageView,Widget),_createClass(ImageView,[{key:"_listen",value:function _listen(e,t){EVENT_TYPES$3.includes(e)?this._nativeListen(e,t):"zoomLevelChanged"===e?this._onoff("zoom",t,this.$triggerChangeZoomLevel):_get(ImageView.prototype.__proto__||Object.getPrototypeOf(ImageView.prototype),"_listen",this).call(this,e,t)}},{key:"$triggerChangeZoomLevel",value:function $triggerChangeZoomLevel(e){var{zoomLevel:t}=e;this._triggerChangeEvent("zoomLevel",t)}},{key:"_nativeType",get:function(){return"tabris.ImageView"}}]),ImageView}();NativeObject.defineProperties(ImageView.prototype,{image:{type:"image",default:null},scaleMode:{type:["choice",["auto","fit","fill","stretch","none"]],default:"auto"},tintColor:{type:"color",set:function(e,t){this._nativeSet(e,void 0===t?null:t),this._storeProperty(e,t)}},zoomEnabled:{type:"boolean",default:!1,set:function(e,t){this.zoomEnabled!==t&&(t||(this.minZoomLevel=1,this.maxZoomLevel=3,this.zoomLevel=1),this._nativeSet(e,t),this._storeProperty(e,t))}},zoomLevel:{type:"number",nocache:!0,set:function(e,t){if(!this.zoomEnabled)throw new Error("zoomLevel can not be set when zoomEnabled is false");if(t<this.minZoomLevel)throw new Error("zoomLevel can not be smaller than minZoomLevel");if(t>this.maxZoomLevel)throw new Error("zoomLevel can not be larger than maxZoomLevel");this._nativeSet(e,t)}},minZoomLevel:{type:"number",default:1,set:function(e,t){if(!this.zoomEnabled)throw new Error("minZoomLevel can not be set when zoomEnabled is false");if(t>this.maxZoomLevel)throw new Error("minZoomLevel can not be larger than maxZoomLevel");t>this.zoomLevel&&(this.zoomLevel=t),this._nativeSet(e,t),this._storeProperty(e,t)}},maxZoomLevel:{type:"number",default:3,set:function(e,t){if(!this.zoomEnabled)throw new Error("maxZoomLevel can not be set when zoomEnabled is false");if(t<this.minZoomLevel)throw new Error("maxZoomLevel can not be smaller than minZoomLevel");t<this.zoomLevel&&(this.zoomLevel=t),this._nativeSet(e,t),this._storeProperty(e,t)}}});var InactivityTimer=function(e){function InactivityTimer(e){_classCallCheck(this,InactivityTimer);var t=_possibleConstructorReturn(this,(InactivityTimer.__proto__||Object.getPrototypeOf(InactivityTimer)).call(this));return t._create("tabris.InactivityTimer",e),t._nativeListen("timeout",!0),t}return _inherits(InactivityTimer,NativeObject),_createClass(InactivityTimer,[{key:"start",value:function start(){this._nativeCall("start")}},{key:"cancel",value:function cancel(){this._nativeCall("cancel")}}]),InactivityTimer}();NativeObject.defineProperties(InactivityTimer.prototype,{delay:{type:"natural",default:0}});var EVENT_TYPES$4=["input","accept","select"],SearchAction=function(e){function SearchAction(){return _classCallCheck(this,SearchAction),_possibleConstructorReturn(this,(SearchAction.__proto__||Object.getPrototypeOf(SearchAction)).apply(this,arguments))}return _inherits(SearchAction,Widget),_createClass(SearchAction,[{key:"_listen",value:function _listen(e,t){EVENT_TYPES$4.includes(e)?this._nativeListen(e,t):_get(SearchAction.prototype.__proto__||Object.getPrototypeOf(SearchAction.prototype),"_listen",this).call(this,e,t)}},{key:"open",value:function open(){return this._nativeCall("open",{}),this}},{key:"_nativeType",get:function(){return"tabris.SearchAction"}}]),SearchAction}();NativeObject.defineProperties(SearchAction.prototype,{image:{type:"image",default:null},placementPriority:{type:["choice",["low","high","normal"]],default:"normal"},title:{type:"string",default:""},proposals:{default:function(){return[]}},text:{type:"string",nocache:!0},message:{type:"string",default:""},win_symbol:{type:"string",default:""}});var NavigationView=function(e){function NavigationView(e){_classCallCheck(this,NavigationView);var t=_possibleConstructorReturn(this,(NavigationView.__proto__||Object.getPrototypeOf(NavigationView)).call(this,e));return t._nativeListen("backNavigation",!0),t}return _inherits(NavigationView,Composite),_createClass(NavigationView,[{key:"_acceptChild",value:function _acceptChild(e){return e instanceof Page||e instanceof Action||e instanceof SearchAction}},{key:"_addChild",value:function _addChild(e,t){var r=e instanceof Page&&"number"!=typeof t||t===this.pages().length;r&&this.$triggerDisappear(),_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_addChild",this).call(this,e,t),r&&this.$triggerAppear()}},{key:"_removeChild",value:function _removeChild(e){var t=e instanceof Page&&e===this.pages().last();t&&this.$triggerDisappear(),_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_removeChild",this).call(this,e),t&&this.$triggerAppear()}},{key:"$handleBackNavigation",value:function $handleBackNavigation(){this.$pop(this.pages().last())}},{key:"$pop",value:function $pop(e){e&&e.autoDispose?e.dispose():e&&e._setParent(null)}},{key:"_listen",value:function _listen(e,t){"topToolbarHeightChanged"===e||"bottomToolbarHeightChanged"===e?this._nativeListen(e,t):_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){if("backNavigation"===e)this.$handleBackNavigation();else if("topToolbarHeightChanged"===e)this._triggerChangeEvent("topToolbarHeight",t.topToolbarHeight);else{if("bottomToolbarHeightChanged"!==e)return _get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_trigger",this).call(this,e,t);this._triggerChangeEvent("bottomToolbarHeight",t.bottomToolbarHeight)}}},{key:"$triggerAppear",value:function $triggerAppear(){var e=this.pages().last();e&&e.$trigger("appear")}},{key:"$triggerDisappear",value:function $triggerDisappear(){var e=this.pages().last();e&&e.$trigger("disappear")}},{key:"pages",value:function pages(e){return this.children(e).filter(function(e){return e instanceof Page})}},{key:"_nativeType",get:function(){return"tabris.NavigationView"}}]),NavigationView}();NativeObject.defineProperties(NavigationView.prototype,{drawerActionVisible:{type:"boolean",default:!1},toolbarVisible:{type:"boolean",default:!0},toolbarColor:{type:"color"},topToolbarHeight:{readonly:!0},bottomToolbarHeight:{readonly:!0},titleTextColor:{type:"color"},actionColor:{type:"color"},actionTextColor:{type:"color"},pageAnimation:{type:["choice",["default","none"]],default:"default"},win_toolbarTheme:{type:["choice",["default","light","dark"]],default:"default"},win_toolbarOverflowTheme:{type:["choice",["default","light","dark"]],default:"default"},win_drawerActionTheme:{type:["choice",["default","light","dark"]],default:"default"},win_drawerActionBackground:{type:"color"}});var Page=function(e){function Page(){return _classCallCheck(this,Page),_possibleConstructorReturn(this,(Page.__proto__||Object.getPrototypeOf(Page)).apply(this,arguments))}return _inherits(Page,Composite),_createClass(Page,[{key:"insertBefore",value:function insertBefore(){throw new Error("insertBefore not supported on Page")}},{key:"insertAfter",value:function insertAfter(){throw new Error("insertAfter not supported on Page")}},{key:"_setParent",value:function _setParent(e,t){if(e&&!(e instanceof NavigationView))throw new Error("Page could not be appended to "+e);_get(Page.prototype.__proto__||Object.getPrototypeOf(Page.prototype),"_setParent",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.Page"}}]),Page}();NativeObject.defineProperties(Page.prototype,{image:{type:"image",default:null},title:{type:"string",default:""},autoDispose:{type:"boolean",default:!0}});var Picker=function(e){function Picker(e){_classCallCheck(this,Picker);var t=_possibleConstructorReturn(this,(Picker.__proto__||Object.getPrototypeOf(Picker)).call(this,Object.assign({selectionIndex:0},e)));return tabris.on("flush",t.$flush,t),t.on("dispose",function(){return tabris.off("flush",t.$flush,t)}),t}return _inherits(Picker,Widget),_createClass(Picker,[{key:"$flush",value:function $flush(){if(this.$needsUpdateItems){for(var e=new Array(this.itemCount),t=0;t<e.length;t++)e[t]=this.itemText(t);this._nativeSet("items",e),tabris._nativeBridge.flush(),delete this.$needsUpdateItems}this.$newSelectionIndex>=0&&(this._nativeSet("selectionIndex",this.$newSelectionIndex),this._triggerChangeEvent("selectionIndex",this.$newSelectionIndex),tabris._nativeBridge.flush(),delete this.$newSelectionIndex)}},{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):"selectionIndexChanged"===e?this._onoff("select",t,this.$triggerSelectionIndexChanged):_get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){return"select"===e?_get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),"_trigger",this).call(this,"select",{index:t.selectionIndex}):_get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),"_trigger",this).call(this,e,t)}},{key:"$triggerSelectionIndexChanged",value:function $triggerSelectionIndexChanged(e){var{index:t}=e;this._triggerChangeEvent("selectionIndex",t)}},{key:"_nativeType",get:function(){return"tabris.Picker"}}]),Picker}();NativeObject.defineProperties(Picker.prototype,{itemCount:{type:"natural",default:0,set:function(e,t){this._storeProperty(e,t),this.$needsUpdateItems=!0}},itemText:{type:"function",default:function(){return function(){return""}},set:function(e,t){this.$needsUpdateItems=!0,this._storeProperty(e,t)}},selectionIndex:{type:"natural",default:0,set:function(e,t){this.$newSelectionIndex=t},get:function(e){return this.$newSelectionIndex>=0?this.$newSelectionIndex:this._nativeGet(e)}},fillColor:{type:"color"},borderColor:{type:"color"},textColor:{type:"color"}});var Pbkdf2=function(e){function Pbkdf2(){_classCallCheck(this,Pbkdf2);var e=_possibleConstructorReturn(this,(Pbkdf2.__proto__||Object.getPrototypeOf(Pbkdf2)).call(this));return e._create("tabris.pkcs5.Pbkdf2"),e._nativeListen("done",!0),e}return _inherits(Pbkdf2,NativeObject),_createClass(Pbkdf2,[{key:"start",value:function start(e){this._nativeCall("start",e)}}]),Pbkdf2}(),Pkcs5=function(){function Pkcs5(){_classCallCheck(this,Pkcs5)}return _createClass(Pkcs5,[{key:"pbkdf2",value:function pbkdf2(e,t,r,n){var i=arguments;return new Promise(function(o){if(i.length<4)throw new Error("Not enough arguments to pbkdf2");if("string"!=typeof e)throw new Error("Invalid type for password in pbkdf2");if(!(t instanceof Uint8Array))throw new Error("Invalid type for salt in pbkdf2");if("number"!=typeof r||r<=0)throw new Error("Invalid number for iterationCount in pbkdf2");if("number"!=typeof n||n<=0)throw new Error("Invalid number for keySize in pbkdf2");var a=new Pbkdf2;a.on("done",function(e){a.dispose(),o(e.key)}),a.start({password:e,salt:toArray(t),iterationCount:r,keySize:n})})}}]),Pkcs5}();function toArray(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}var ProgressEvent=function(e){function ProgressEvent(e,t){if(_classCallCheck(this,ProgressEvent),arguments.length<1)throw new Error("Not enough arguments to ProgressEvent");var r=_possibleConstructorReturn(this,(ProgressEvent.__proto__||Object.getPrototypeOf(ProgressEvent)).call(this,e,t));return r.$lengthComputable=t&&t.lengthComputable||!1,r.$loaded=t&&t.loaded||0,r.$total=t&&t.total||0,r}return _inherits(ProgressEvent,Event),_createClass(ProgressEvent,[{key:"lengthComputable",get:function(){return this.$lengthComputable}},{key:"loaded",get:function(){return this.$loaded}},{key:"total",get:function(){return this.$total}}]),ProgressEvent}(),ProgressBar=function(e){function ProgressBar(){return _classCallCheck(this,ProgressBar),_possibleConstructorReturn(this,(ProgressBar.__proto__||Object.getPrototypeOf(ProgressBar)).apply(this,arguments))}return _inherits(ProgressBar,Widget),_createClass(ProgressBar,[{key:"_nativeType",get:function(){return"tabris.ProgressBar"}}]),ProgressBar}();NativeObject.defineProperties(ProgressBar.prototype,{minimum:{type:"integer",default:0},maximum:{type:"integer",default:100},tintColor:{type:"color"},selection:{type:"integer",default:0},state:{type:["choice",["normal","paused","error"]],default:"normal"}});var RadioButton=function(e){function RadioButton(){return _classCallCheck(this,RadioButton),_possibleConstructorReturn(this,(RadioButton.__proto__||Object.getPrototypeOf(RadioButton)).apply(this,arguments))}return _inherits(RadioButton,Widget),_createClass(RadioButton,[{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):"checkedChanged"===e?this._onoff("select",t,this.$triggerChangeChecked):_get(RadioButton.prototype.__proto__||Object.getPrototypeOf(RadioButton.prototype),"_listen",this).call(this,e,t)}},{key:"$triggerChangeChecked",value:function $triggerChangeChecked(e){var{checked:t}=e;this._triggerChangeEvent("checked",t)}},{key:"_nativeType",get:function(){return"tabris.RadioButton"}}]),RadioButton}();NativeObject.defineProperties(RadioButton.prototype,{text:{type:"string",default:""},checked:{type:"boolean",nocache:!0},textColor:{type:"color"},tintColor:{type:"color"},checkedTintColor:{type:"color"}});var RefreshComposite=function(e){function RefreshComposite(){return _classCallCheck(this,RefreshComposite),_possibleConstructorReturn(this,(RefreshComposite.__proto__||Object.getPrototypeOf(RefreshComposite)).apply(this,arguments))}return _inherits(RefreshComposite,Composite),_createClass(RefreshComposite,[{key:"_listen",value:function _listen(e,t){"refresh"===e?this._nativeListen(e,t):_get(RefreshComposite.prototype.__proto__||Object.getPrototypeOf(RefreshComposite.prototype),"_listen",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.RefreshComposite"}}]),RefreshComposite}();NativeObject.defineProperties(RefreshComposite.prototype,{refreshEnabled:{type:"boolean",default:!0},refreshIndicator:{type:"boolean",nocache:!0},refreshMessage:{type:"string",default:""}});var EVENT_TYPES$5=["scrollX","scrollY"],ScrollView=function(e){function ScrollView(){return _classCallCheck(this,ScrollView),_possibleConstructorReturn(this,(ScrollView.__proto__||Object.getPrototypeOf(ScrollView)).apply(this,arguments))}return _inherits(ScrollView,Composite),_createClass(ScrollView,[{key:"_listen",value:function _listen(e,t){EVENT_TYPES$5.includes(e)?this._nativeListen(e,t):"offsetXChanged"===e?this._onoff("scrollX",t,this.$triggerChangeOffsetX):"offsetYChanged"===e?this._onoff("scrollY",t,this.$triggerChangeOffsetY):_get(ScrollView.prototype.__proto__||Object.getPrototypeOf(ScrollView.prototype),"_listen",this).call(this,e,t)}},{key:"$triggerChangeOffsetX",value:function $triggerChangeOffsetX(e){var{offset:t}=e;this._triggerChangeEvent("offsetX",t)}},{key:"$triggerChangeOffsetY",value:function $triggerChangeOffsetY(e){var{offset:t}=e;this._triggerChangeEvent("offsetY",t)}},{key:"scrollToY",value:function scrollToY(e,t){return this._nativeCall("scrollToY",{offset:e,animate:!(t&&"animate"in t)||!!t.animate}),this}},{key:"scrollToX",value:function scrollToX(e,t){return this._nativeCall("scrollToX",{offset:e,animate:!(t&&"animate"in t)||!!t.animate}),this}},{key:"_nativeType",get:function(){return"tabris.ScrollView"}}]),ScrollView}();NativeObject.defineProperties(ScrollView.prototype,{direction:{type:["choice",["horizontal","vertical"]],default:"vertical"},offsetX:{type:"number",nocache:!0,readonly:!0},offsetY:{type:"number",nocache:!0,readonly:!0}});var Slider=function(e){function Slider(){return _classCallCheck(this,Slider),_possibleConstructorReturn(this,(Slider.__proto__||Object.getPrototypeOf(Slider)).apply(this,arguments))}return _inherits(Slider,Widget),_createClass(Slider,[{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):"selectionChanged"===e?this._onoff("select",t,this.$triggerChangeSelection):_get(Slider.prototype.__proto__||Object.getPrototypeOf(Slider.prototype),"_listen",this).call(this,e,t)}},{key:"$triggerChangeSelection",value:function $triggerChangeSelection(e){var{selection:t}=e;this._triggerChangeEvent("selection",t)}},{key:"_nativeType",get:function(){return"tabris.Slider"}}]),Slider}();NativeObject.defineProperties(Slider.prototype,{minimum:{type:"integer",default:0},maximum:{type:"integer",default:100},selection:{type:"integer",nocache:!0},tintColor:{type:"color"}});var Switch=function(e){function Switch(){return _classCallCheck(this,Switch),_possibleConstructorReturn(this,(Switch.__proto__||Object.getPrototypeOf(Switch)).apply(this,arguments))}return _inherits(Switch,Widget),_createClass(Switch,[{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):"checkedChanged"===e?this._onoff("select",t,this.$triggerChangeChecked):_get(Switch.prototype.__proto__||Object.getPrototypeOf(Switch.prototype),"_listen",this).call(this,e,t)}},{key:"$triggerChangeChecked",value:function $triggerChangeChecked(e){var{checked:t}=e;this._triggerChangeEvent("checked",t)}},{key:"_nativeType",get:function(){return"tabris.Switch"}}]),Switch}();NativeObject.defineProperties(Switch.prototype,{checked:{type:"boolean",nocache:!0},thumbOnColor:{type:"color"},thumbOffColor:{type:"color"},trackOnColor:{type:"color"},trackOffColor:{type:"color"}});var EVENT_TYPES$6=["select","scroll"],TabFolder=function(e){function TabFolder(){return _classCallCheck(this,TabFolder),_possibleConstructorReturn(this,(TabFolder.__proto__||Object.getPrototypeOf(TabFolder)).apply(this,arguments))}return _inherits(TabFolder,Composite),_createClass(TabFolder,[{key:"_acceptChild",value:function _acceptChild(e){return e instanceof Tab}},{key:"_addChild",value:function _addChild(e,t){_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_addChild",this).call(this,e,t),0===this.$children.indexOf(e)&&(e.$trigger("appear"),this.$previousSelection=e)}},{key:"_removeChild",value:function _removeChild(e){if(!this._inDispose){var t=this.$children.indexOf(e),r=this.$children[t+1],n=this.$children[t-1],i=r||n;i?this.selection=i:this._triggerChangeEvent("selection",null)}_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_removeChild",this).call(this,e)}},{key:"_listen",value:function _listen(e,t){EVENT_TYPES$6.includes(e)?this._nativeListen(e,t):"selectionChanged"===e?this._onoff("select",t,this.$triggerChangeSelection):_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){if("select"===e){var r=tabris._proxies.find(t.selection);return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_trigger",this).call(this,"select",{selection:r})}if("scroll"===e){var n=t.selection?tabris._proxies.find(t.selection):null;return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_trigger",this).call(this,"scroll",{selection:n,offset:t.offset})}return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_trigger",this).call(this,e,t)}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(e,t){_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_triggerChangeEvent",this).call(this,e,t),"selection"===e&&(this.$previousSelection&&this.$previousSelection._trigger("disappear"),t&&t._trigger("appear"),this.$previousSelection=t)}},{key:"$triggerChangeSelection",value:function $triggerChangeSelection(e){var{selection:t}=e;this._triggerChangeEvent("selection",t)}},{key:"_nativeType",get:function(){return"tabris.TabFolder"}}]),TabFolder}();NativeObject.defineProperties(TabFolder.prototype,{paging:{type:"boolean",default:!1},tabBarLocation:{type:["choice",["top","bottom","hidden","auto"]],default:"auto"},tabMode:{type:["choice",["fixed","scrollable"]],default:"fixed"},selection:{set:function(e,t){this._children().indexOf(t)<0?warn("Can not set TabFolder selection to "+t):(this._nativeSet("selection",t.cid),this._triggerChangeEvent("selection",t))},get:function(){if(!this.$children.length)return null;var e=this._nativeGet("selection");return e?tabris._proxies.find(e):null}},textColor:{type:"color"},win_tabBarTheme:{type:["choice",["default","light","dark"]],default:"default"}});var Tab=function(e){function Tab(){return _classCallCheck(this,Tab),_possibleConstructorReturn(this,(Tab.__proto__||Object.getPrototypeOf(Tab)).apply(this,arguments))}return _inherits(Tab,Composite),_createClass(Tab,[{key:"_setParent",value:function _setParent(e,t){if(e&&!(e instanceof TabFolder))throw new Error("Tab could not be appended to "+e);_get(Tab.prototype.__proto__||Object.getPrototypeOf(Tab.prototype),"_setParent",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.Tab"}}]),Tab}();NativeObject.defineProperties(Tab.prototype,{title:{type:"string",default:""},image:{type:"image",default:null},selectedImage:{type:"image",default:null},badge:{type:"string",default:""}});var EVENT_TYPES$7=["focus","blur","accept","input"],TextInput=function(e){function TextInput(){return _classCallCheck(this,TextInput),_possibleConstructorReturn(this,(TextInput.__proto__||Object.getPrototypeOf(TextInput)).apply(this,arguments))}return _inherits(TextInput,Widget),_createClass(TextInput,[{key:"_listen",value:function _listen(e,t){EVENT_TYPES$7.includes(e)?this._nativeListen(e,t):"textChanged"===e?this._onoff("input",t,this.$triggerChangeSelection):_get(TextInput.prototype.__proto__||Object.getPrototypeOf(TextInput.prototype),"_listen",this).call(this,e,t)}},{key:"$triggerChangeSelection",value:function $triggerChangeSelection(e){var{text:t}=e;this._triggerChangeEvent("text",t)}},{key:"_nativeType",get:function(){return"tabris.TextInput"}}]),TextInput}();NativeObject.defineProperties(TextInput.prototype,{type:{type:["choice",["default","password","search","multiline"]]},text:{type:"string",nocache:!0},message:{type:"string",default:""},editable:{type:"boolean",default:!0},keepFocus:{type:"boolean",default:!1},alignment:{type:["choice",["left","center","right"]],default:"left"},autoCorrect:{type:"boolean",default:!1},autoCapitalize:{type:["choice",[!0,!1,"none","sentence","word","all"]],default:!1,set:function(e,t){!0===t?this._nativeSet(e,"all"):!1===t?this._nativeSet(e,"none"):this._nativeSet(e,t),this._storeProperty(e,t)}},keyboard:{type:["choice",["ascii","decimal","email","number","numbersAndPunctuation","phone","url","default"]],default:"default"},enterKeyType:{type:["choice",["default","done","next","send","search","go"]],default:"default"},focused:{type:"boolean",nocache:!0},fillColor:{type:"color"},borderColor:{type:"color"},textColor:{type:"color"},revealPassword:{type:"boolean"},cursorColor:{type:"color"}});var TextView=function(e){function TextView(){return _classCallCheck(this,TextView),_possibleConstructorReturn(this,(TextView.__proto__||Object.getPrototypeOf(TextView)).apply(this,arguments))}return _inherits(TextView,Widget),_createClass(TextView,[{key:"_nativeType",get:function(){return"tabris.TextView"}}]),TextView}();NativeObject.defineProperties(TextView.prototype,{alignment:{type:["choice",["left","right","center"]],default:"left"},markupEnabled:{type:"boolean",default:!1},lineSpacing:{type:"number",default:1},selectable:{type:"boolean",default:!1},maxLines:{type:["nullable","natural"],default:null,set:function(e,t){this._nativeSet(e,t<=0?null:t),this._storeProperty(e,t)}},text:{type:"string",default:""},textColor:{type:"color"}});var TimeDialog=function(e){function TimeDialog(e){_classCallCheck(this,TimeDialog);var t=_possibleConstructorReturn(this,(TimeDialog.__proto__||Object.getPrototypeOf(TimeDialog)).call(this));return t._create("tabris.TimeDialog",e),t._nativeListen("close",!0),t._autoDispose=!0,t}return _inherits(TimeDialog,Popup),_createClass(TimeDialog,[{key:"_trigger",value:function _trigger(e,t){if("close"===e)this._handleCloseEvent(t);else{if("select"!==e)return _get(TimeDialog.prototype.__proto__||Object.getPrototypeOf(TimeDialog.prototype),"_trigger",this).call(this,e,t);t.date=new Date(t.date),_get(TimeDialog.prototype.__proto__||Object.getPrototypeOf(TimeDialog.prototype),"_trigger",this).call(this,"select",t),this._handleCloseEvent(t)}}},{key:"_handleCloseEvent",value:function _handleCloseEvent(e){_get(TimeDialog.prototype.__proto__||Object.getPrototypeOf(TimeDialog.prototype),"_trigger",this).call(this,"close",e),this.dispose()}},{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):"close"===e?this._nativeListen(e,t):_get(TimeDialog.prototype.__proto__||Object.getPrototypeOf(TimeDialog.prototype),"_listen",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.TimeDialog"}}]),TimeDialog}();function setDate$1(e,t){if(!(t instanceof Date))throw new Error("date is not of type Date");this._nativeSet(e,t.getTime()),this._storeProperty(e,t)}NativeObject.defineProperties(TimeDialog.prototype,{date:{type:"any",default:void 0,set:setDate$1}});var ToggleButton=function(e){function ToggleButton(){return _classCallCheck(this,ToggleButton),_possibleConstructorReturn(this,(ToggleButton.__proto__||Object.getPrototypeOf(ToggleButton)).apply(this,arguments))}return _inherits(ToggleButton,Widget),_createClass(ToggleButton,[{key:"_listen",value:function _listen(e,t){"select"===e?this._nativeListen(e,t):"checkedChanged"===e?this._onoff("select",t,this.$triggerChangeChecked):_get(ToggleButton.prototype.__proto__||Object.getPrototypeOf(ToggleButton.prototype),"_listen",this).call(this,e,t)}},{key:"$triggerChangeChecked",value:function $triggerChangeChecked(e){var{checked:t}=e;this._triggerChangeEvent("checked",t)}},{key:"_nativeType",get:function(){return"tabris.ToggleButton"}}]),ToggleButton}();NativeObject.defineProperties(ToggleButton.prototype,{text:{type:"string",default:""},image:{type:"image",default:null},checked:{type:"boolean",nocache:!0},alignment:{type:["choice",["left","right","center"]],default:"center"},textColor:{type:"color"}});var Video=function(e){function Video(){return _classCallCheck(this,Video),_possibleConstructorReturn(this,(Video.__proto__||Object.getPrototypeOf(Video)).apply(this,arguments))}return _inherits(Video,Widget),_createClass(Video,[{key:"_listen",value:function _listen(e,t){"stateChanged"===e||"speedChanged"===e?this._nativeListen(e,t):_get(Video.prototype.__proto__||Object.getPrototypeOf(Video.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){return"stateChanged"===e?this._triggerChangeEvent("state",t.state):"speedChanged"===e?this._triggerChangeEvent("speed",t.speed):_get(Video.prototype.__proto__||Object.getPrototypeOf(Video.prototype),"_trigger",this).call(this,e,t)}},{key:"pause",value:function pause(){this._nativeCall("pause")}},{key:"play",value:function play(e){this._nativeCall("play",{speed:arguments.length>0?types.number.encode(e):1})}},{key:"seek",value:function seek(e){this._nativeCall("seek",{position:types.number.encode(e)})}},{key:"_nativeType",get:function(){return"tabris.Video"}}]),Video}();NativeObject.defineProperties(Video.prototype,{url:{type:"string",default:""},controlsVisible:{type:"boolean",default:!0},autoPlay:{type:"boolean",default:!0},speed:{readonly:!0},position:{readonly:!0},duration:{readonly:!0},state:{readonly:!0}});var EVENT_TYPES$8=["navigate","load","download","message"],WebView=function(e){function WebView(){return _classCallCheck(this,WebView),_possibleConstructorReturn(this,(WebView.__proto__||Object.getPrototypeOf(WebView)).apply(this,arguments))}return _inherits(WebView,Widget),_createClass(WebView,[{key:"_listen",value:function _listen(e,t){EVENT_TYPES$8.includes(e)?this._nativeListen(e,t):_get(WebView.prototype.__proto__||Object.getPrototypeOf(WebView.prototype),"_listen",this).call(this,e,t)}},{key:"postMessage",value:function postMessage(e,t){return this._nativeCall("postMessage",{data:e,origin:t}),this}},{key:"goBack",value:function goBack(){this._nativeCall("goBack")}},{key:"goForward",value:function goForward(){this._nativeCall("goForward")}},{key:"_loadData",value:function _loadData(e,t){this._nativeCall("loadData",{data:e,mimeType:t})}},{key:"_nativeType",get:function(){return"tabris.WebView"}}]),WebView}();NativeObject.defineProperties(WebView.prototype,{url:{type:"string",nocache:!0},html:{type:"string",nocache:!0},headers:{type:"any",default:{}},canGoBack:{type:"boolean",readonly:!0},canGoForward:{type:"boolean",readonly:!0},initScript:{type:"string"}});var CONNECTING=0,OPEN=1,CLOSING=2,CLOSED=3,CONSTANTS={CONNECTING:{value:CONNECTING},OPEN:{value:OPEN},CLOSING:{value:CLOSING},CLOSED:{value:CLOSED}},EVENT_TYPES$9=["open","message","close","error"],_WebSocket=function(e){function _WebSocket(e){_classCallCheck(this,_WebSocket);var t=_possibleConstructorReturn(this,(_WebSocket.__proto__||Object.getPrototypeOf(_WebSocket)).call(this));return t._create("tabris.WebSocket",e),EVENT_TYPES$9.forEach(function(e){return t._nativeListen(e,!0)}),t}return _inherits(_WebSocket,NativeObject),_WebSocket}();NativeObject.defineProperties(_WebSocket.prototype,{url:{type:"string",default:""},protocol:{type:"any",default:""},binaryType:{type:"string",default:"blob"},bufferedAmount:{type:"number",nocache:!0}});var WebSocket=function(){function WebSocket(e,t){if(_classCallCheck(this,WebSocket),"string"!=typeof e)throw new Error("The WebSocket url has to be of type string");var r=extractScheme(e);if("ws"!==r&&"wss"!==r)throw new Error("The WebSocket url has to have a scheme of 'ws' or 'wss' but is '"+r+"'");if("string"!=typeof t&&!Array.isArray(t))throw new Error("The WebSocket protocol has too be a string or an array of strings");var n=Array.isArray(t)?t:[t];this.url=e,this.readyState=CONNECTING,this.protocol="",this.extensions="",addDOMEventTargetMethods(this),defineEventHandlerProperties(this,EVENT_TYPES$9),this._proxy=this.$createProxy(e,n)}return _createClass(WebSocket,[{key:"$createProxy",value:function $createProxy(e,t){var r=this;return new _WebSocket({url:e,protocol:t}).on("open",function(e){r.readyState=OPEN,r.protocol=e.protocol,r.extensions=e.extensions,r.dispatchEvent(Object.assign(new Event("open"),omit(e,["target","type","timeStamp"])))}).on("message",function(e){r.readyState===OPEN&&r.dispatchEvent(Object.assign(new Event("message"),omit(e,["target","type","timeStamp"])))}).on("close",function(e){r.readyState=CLOSED,r.dispatchEvent(Object.assign(new Event("close"),omit(e,["target","type","timeStamp"])))}).on("error",function(e){r.readyState=CLOSED,r.dispatchEvent(Object.assign(new Event("error"),omit(e,["target","type","timeStamp"])))})}},{key:"send",value:function send(e){if(this.readyState===CONNECTING)throw new Error("Can not 'send' WebSocket message when WebSocket state is CONNECTING");if("string"==typeof e)this._proxy._nativeCall("send",{data:e});else{if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("Data of type "+typeof e+" is not supported in WebSocket 'send' operation");this._proxy._nativeCall("send",{data:e})}}},{key:"close",value:function close(e,t){if(e&&("number"!=typeof e||"number"!=typeof e||!(1e3===e||e>=3e3&&e<=4999)))throw new Error("A given close code has to be either 1000 or in the range 3000 - 4999 inclusive");if(t&&getStringByteSize(t)>123)throw new Error("The close reason can not be larger than 123 utf-8 bytes");if(this.readyState!==CLOSING&&this.readyState!==CLOSED){this.readyState=CLOSING;var r={};e&&(r.code=e),t&&(r.reason=t),this._proxy._nativeCall("close",r)}}},{key:"binaryType",set:function(e){this._proxy.binaryType=e},get:function(){return this._proxy.binaryType}},{key:"bufferedAmount",set:function(e){warn('Can not set read-only property "bufferedAmount"')},get:function(){return this._proxy.bufferedAmount}}]),WebSocket}();function getStringByteSize(e){var t=0;if(!e.length)return 0;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);n<=127?t+=1:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,r++):t+=n<65535?3:4}return t}function extractScheme(e){var t=/^(\S+?):/.exec(e);return t?t[1]:null}Object.defineProperties(WebSocket,CONSTANTS),Object.defineProperties(WebSocket.prototype,CONSTANTS);var HttpRequest=function(e){function HttpRequest(){_classCallCheck(this,HttpRequest);var e=_possibleConstructorReturn(this,(HttpRequest.__proto__||Object.getPrototypeOf(HttpRequest)).call(this));return e._create("tabris.HttpRequest"),e._nativeListen("stateChanged",!0),e._nativeListen("downloadProgress",!0),e._nativeListen("uploadProgress",!0),e}return _inherits(HttpRequest,NativeObject),_createClass(HttpRequest,[{key:"abort",value:function abort(){this._nativeCall("abort",{})}},{key:"send",value:function send(e){this._nativeCall("send",e)}}]),HttpRequest}(),UNSENT=0,OPENED=1,HEADERS_RECEIVED=2,LOADING=3,DONE=4,EVENT_TYPES$10=["loadstart","readystatechange","load","loadend","progress","timeout","abort","error"],UPLOAD_EVENT_TYPES=["progress","loadstart","load","loadend","timeout","abort","error"],SUPPORTED_SCHEMES=["http","https","file"],XMLHttpRequest=function(){function XMLHttpRequest(){_classCallCheck(this,XMLHttpRequest),this.$authorRequestHeaders={},this.$timeout=0,this.$status=0,this.$statusText="",this.$responseHeaders="",this.$readyState=UNSENT,this.$responseData="",this.$withCredentials=!1,this.$responseType="",this.$sendInvoked=!1,this.$isSynchronous=!1,this.$error=!1,this.$uploadComplete=!1,Object.defineProperty(this,"upload",{value:{}}),defineEventHandlerProperties(this,EVENT_TYPES$10),defineEventHandlerProperties(this.upload,UPLOAD_EVENT_TYPES),addDOMEventTargetMethods(this),addDOMEventTargetMethods(this.upload)}return _createClass(XMLHttpRequest,[{key:"open",value:function open(e,t,r){var n={};if(validateRequiredOpenArgs(e,t),n.source=t,n.isRelative=!new RegExp("^(?:[a-z]+:)?//","i").test(t),void 0===r&&(r=!0),!r)throw new Error("Only asynchronous request supported.");this.$requestMethod=e,this.$requestUrl=n,this.$isSynchronous=!r,this.$authorRequestHeaders={},this.$sendInvoked=!1,this.$responseData=null,this.$readyState!==OPENED&&(this.$readyState=OPENED,dispatchEvent("readystatechange",this))}},{key:"send",value:function send(e){var t=this;if(this.$proxy=(new HttpRequest).on("stateChanged",function(e){return handleStateChange(e,t)}).on("downloadProgress",function(e){return dispatchProgressEvent("progress",t,e)}).on("uploadProgress",function(e){return dispatchProgressEvent("progress",t.upload,e)}),this.$readyState!==OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'send'");if(this.$sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to execute 'send'");["GET","HEAD"].indexOf(this.$requestMethod)>-1&&(e=null),this.$requestBody=e,this.$error=this.$uploadComplete=!1,e||(this.$uploadComplete=!0),this.$sendInvoked=!0,dispatchProgressEvent("loadstart",this),this.$uploadComplete||dispatchProgressEvent("loadstart",this.upload),this.$proxy.send({url:this.$requestUrl.source,method:this.$requestMethod,timeout:this.timeout,headers:this.$authorRequestHeaders,data:this.$requestBody,responseType:this.$responseType})}},{key:"abort",value:function abort(){this.$proxy&&this.$proxy.abort(),[UNSENT,OPENED].indexOf(this.$readyState)>-1&&!this.$sendInvoked||this.$readyState===DONE||(dispatchEvent("readystatechange",this),this.$uploadComplete||(this.$uploadComplete=!0,dispatchAbortProgressEvents(this.upload)),dispatchAbortProgressEvents(this)),this.$readyState=UNSENT}},{key:"setRequestHeader",value:function setRequestHeader(e,t){if(this.$readyState!==OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'setRequestHeader'");if(this.$sendInvoked)throw new Error("InvalidStateError: cannot set request header if 'send()' invoked and request not completed");if(!validHttpToken(e))throw new TypeError("Invalid HTTP header name, failed to execute 'open'");if(!isValidHttpHeaderValue(t))throw new TypeError("Invalid HTTP header value, failed to execute 'open'");e in this.$authorRequestHeaders?this.$authorRequestHeaders[e]=this.$authorRequestHeaders[e]+", "+t:this.$authorRequestHeaders[e]=t}},{key:"getResponseHeader",value:function getResponseHeader(e){if([UNSENT,OPENED].indexOf(this.readyState)>-1)return null;if(this.$error)return null;for(var t in this.$responseHeaders)if(t.toLowerCase()===e.toLowerCase())return this.$responseHeaders[t];return null}},{key:"getAllResponseHeaders",value:function getAllResponseHeaders(){if([UNSENT,OPENED].indexOf(this.readyState)>-1)return"";if(this.$error)return"";var e=[];for(var t in this.$responseHeaders)e.push(t+": "+this.$responseHeaders[t]);return e.join("\r\n")}},{key:"readyState",get:function(){return this.$readyState}},{key:"timeout",get:function(){return this.$timeout},set:function(e){isNaN(e)||(this.$timeout=Math.round(e))}},{key:"responseText",get:function(){if(""!==this.$responseType&&"text"!==this.$responseType)throw new Error("XHR responseText not accessible for non-text responseType");return this.$readyState!==LOADING&&this.$readyState!==DONE?"":this.$responseData||""}},{key:"response",get:function(){return""===this.$responseType||"string"===this.$responseType?this.$readyState!==LOADING&&this.$readyState!==DONE?"":this.$responseData||"":this.$readyState!==DONE?null:this.$responseData}},{key:"responseType",get:function(){return this.$responseType},set:function(e){if(this.$readyState===LOADING||this.$readyState===DONE)throw new Error("The response type cannot be set when state is LOADING or DONE.");if(!(["arraybuffer","blob","document","json","text"].indexOf(e)<0)){if(["blob","document","json"].indexOf(e)>-1)throw new Error("Unsupported responseType, only 'text' and 'arraybuffer' are supported");this.$responseType=e}}},{key:"status",get:function(){return[OPENED,UNSENT].indexOf(this.$readyState)>-1?0:this.$error?0:this.$status}},{key:"statusText",get:function(){return[OPENED,UNSENT].indexOf(this.$readyState)>-1?"":this.$error?"":this.$statusText}},{key:"withCredentials",get:function(){return this.$withCredentials},set:function(e){if(this.$readyState!==UNSENT&&this.$readyState!==OPENED)throw new Error("InvalidStateError: state must be 'UNSENT' or 'OPENED' when setting withCredentials");if(this.$sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to set 'withCredentials'");"boolean"==typeof e&&(this.$withCredentials=e)}}]),XMLHttpRequest}();function handleStateChange(e,t){switch(e.state){case"headers":t.$readyState=HEADERS_RECEIVED,t.$status=e.code,t.$statusText=e.message,t.$responseHeaders=e.headers,dispatchEvent("readystatechange",t),t.$uploadComplete=!0,dispatchFinishedProgressEvents(t.upload);break;case"loading":t.$readyState=LOADING,dispatchEvent("readystatechange",t);break;case"finished":t.$responseData=e.response,t.$readyState=DONE,dispatchEvent("readystatechange",t),dispatchFinishedProgressEvents(t),dispatchFinishedProgressEvents(t.upload),t.$proxy.dispose(),t.$proxy=null;break;case"error":handleRequestError("error",t);break;case"timeout":handleRequestError("timeout",t);break;case"abort":handleRequestError("abort",t)}}function handleRequestError(e,t){t.$error=!0,t.$readyState=DONE,dispatchEvent("readystatechange",t),dispatchErrorProgressEvents(e,t),t.$uploadComplete||(t.$uploadComplete=!0,dispatchErrorProgressEvents(e,t.upload)),t.$proxy.dispose(),t.$proxy=null}function validateRequiredOpenArgs(e,t){if(!e)throw new TypeError("Method argument should be specified to execute 'open'");if(!t)throw new TypeError("URL argument should be specified to execute 'open'");validateMethod(e),validateUrl(t)}function validateMethod(e){if(!validHttpToken(e))throw new TypeError("Invalid HTTP method, failed to execute 'open'");var t=e.toUpperCase();["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"].indexOf(t)>=0&&(e=t);if(["CONNECT","TRACE","TRACK"].indexOf(e)>=0)throw new Error("SecurityError: '"+e+"' HTTP method is not secure, failed to execute 'open'")}function validHttpToken(e){return!(/[^\x21-\x7E]/.test(e)||["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"].indexOf(e)>=0)}function isValidHttpHeaderValue(e){return/^[\x09\x0A\x0D\x20-\x7E\xA0-\xFF]*$/.test(e)&&e.indexOf("\n")<0&&e.indexOf("\r")<0}function validateUrl(e){var t=extractScheme$1(e);if(t&&-1===SUPPORTED_SCHEMES.indexOf(t))throw new SyntaxError("Unsupported URL scheme, failed to execute 'open'")}function extractScheme$1(e){var t=/^(\S+?):/.exec(e);return t?t[1]:null}function dispatchEvent(e,t){t.dispatchEvent(new Event(e))}function dispatchProgressEvent(e,t,r){t.dispatchEvent(new ProgressEvent(e,r))}function dispatchAbortProgressEvents(e){dispatchProgressEvent("progress",e),dispatchProgressEvent("abort",e),dispatchProgressEvent("loadend",e)}function dispatchErrorProgressEvents(e,t){dispatchProgressEvent("progress",t),dispatchProgressEvent(e,t),dispatchProgressEvent("loadend",t)}function dispatchFinishedProgressEvents(e){dispatchProgressEvent("load",e),dispatchProgressEvent("loadend",e)}Object.defineProperties(XMLHttpRequest.prototype,{UNSENT:{value:UNSENT},OPENED:{value:OPENED},HEADERS_RECEIVED:{value:HEADERS_RECEIVED},LOADING:{value:LOADING},DONE:{value:DONE}});var Headers=function(){function Headers(e){var t=this;_classCallCheck(this,Headers),this.$map={},e instanceof Headers?e.forEach(function(e,r){return t.append(r,e)}):Array.isArray(e)?e.forEach(function(e){return t.append(e[0],e[1])}):e&&Object.getOwnPropertyNames(e).forEach(function(r){return t.append(r,e[r])})}return _createClass(Headers,[{key:"append",value:function append(e,t){e=normalizeName(e);var r=this.$map[e];this.$map[e]=r?r+","+t:""+t}},{key:"delete",value:function _delete(e){delete this.$map[normalizeName(e)]}},{key:"get",value:function get(e){return e=normalizeName(e),this.has(e)?this.$map[e]:null}},{key:"has",value:function has(e){return this.$map.hasOwnProperty(normalizeName(e))}},{key:"set",value:function set(e,t){this.$map[normalizeName(e)]=""+t}},{key:"forEach",value:function forEach(e,t){for(var r in this.$map)this.$map.hasOwnProperty(r)&&e.call(t,this.$map[r],r,this)}},{key:"keys",value:function keys(){var e=[];return this.forEach(function(t,r){return e.push(r)}),iteratorFor(e)}},{key:"values",value:function values(){var e=[];return this.forEach(function(t){return e.push(t)}),iteratorFor(e)}},{key:"entries",value:function entries(){var e=[];return this.forEach(function(t,r){return e.push([r,t])}),iteratorFor(e)}},{key:iteratorSymbol(),value:function(){return this.entries()}}]),Headers}();function normalizeName(e){if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e=""+e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function iteratorFor(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t[iteratorSymbol()]=function(){return t},t}function iteratorSymbol(){return"Symbol"in global&&"iterator"in global.Symbol?global.Symbol.iterator:"@@iterator"}var Body=function(){function Body(){_classCallCheck(this,Body)}return _createClass(Body,[{key:"_initBody",value:function _initBody(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else{if(!ArrayBuffer.prototype.isPrototypeOf(e)&&!ArrayBuffer.isView(e))throw new Error("unsupported BodyInit type");this._bodyBuffer=e.slice(0)}else this._bodyText=""}},{key:"text",value:function text(){return this.$consumed()||Promise.resolve(this._bodyBuffer?TextDecoder.decode(this._bodyBuffer,this._encoding):this._bodyText)}},{key:"json",value:function json(){return this.text().then(JSON.parse)}},{key:"arrayBuffer",value:function arrayBuffer(){return this.$consumed()||Promise.resolve(this._bodyBuffer)}},{key:"$consumed",value:function $consumed(){if(this.$bodyUsed)return Promise.reject(new TypeError("Already read"));this.$bodyUsed=!0}},{key:"bodyUsed",get:function(){return!!this.$bodyUsed}},{key:"_encoding",get:function(){}}]),Body}(),METHODS=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],Request=function(e){function Request(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,Request);var r=_possibleConstructorReturn(this,(Request.__proto__||Object.getPrototypeOf(Request)).call(this)),n=t.body;if(e instanceof Request){if(e.bodyUsed)throw new TypeError("Already read");n||null==e._bodyInit||(n=e._bodyInit,e.$bodyUsed=!0)}else e={url:e};if(Object.defineProperties(r,{url:{value:""+e.url},method:{value:normalizeMethod(t.method||e.method||"GET")},headers:{value:new Headers(t.headers||e.headers||{})},credentials:{value:t.credentials||e.credentials||"omit"},mode:{value:t.mode||e.mode||null},referrer:{value:""},timeout:{value:t.timeout||0}}),("GET"===r.method||"HEAD"===r.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");return r._initBody(n),r}return _inherits(Request,Body),_createClass(Request,[{key:"clone",value:function clone(){return new Request(this,{body:this._bodyInit})}}]),Request}();function normalizeMethod(e){var t=e.toUpperCase();return METHODS.includes(t)?t:e}var REDIRECT_STATUSES=[301,302,303,307,308],Response=function(e){function Response(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,Response);var r=_possibleConstructorReturn(this,(Response.__proto__||Object.getPrototypeOf(Response)).call(this));return Object.defineProperties(r,{url:{value:t.url||""},type:{value:t._type||"default"},status:{value:"status"in t?t.status:200},statusText:{value:"statusText"in t?t.statusText:"OK"},headers:{value:new Headers(t.headers)}}),r._initBody(e),r}return _inherits(Response,Body),_createClass(Response,[{key:"clone",value:function clone(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})}},{key:"ok",get:function(){return this.status>=200&&this.status<300}},{key:"_encoding",get:function(){var e=(this.headers.get("content-type")||"").split(";").slice(1);for(var t of e){var r=/charset=(\S+)/i.exec(t.trim());if(r)return r[1].toLowerCase()}return null}}],[{key:"error",value:function error(){return new Response(null,{status:0,statusText:"",_type:"error"})}},{key:"redirect",value:function redirect(e,t){if(!REDIRECT_STATUSES.includes(t))throw new RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})}}]),Response}();function fetch(e,t){return new Promise(function(r,n){var i=new Request(e,t),o=new HttpRequest,a={};o.on("stateChanged",function(e){switch(e.state){case"headers":a.status=e.code,a.statusText=e.message,a.headers=new Headers(e.headers);break;case"finished":a.url=a.headers.get("X-Request-URL")||i.url,r(new Response(e.response,a)),o.dispose();break;case"error":n(new TypeError("Network request failed")),o.dispose();break;case"timeout":n(new TypeError("Network request timed out")),o.dispose();break;case"abort":n(new TypeError("Network request aborted")),o.dispose()}}),o.send({url:i.url,method:i.method,responseType:"arraybuffer",data:void 0===i._bodyInit?null:i._bodyInit,headers:encodeHeaders(i.headers),timeout:i.timeout})})}function encodeHeaders(e){var t={};return e.forEach(function(e,r){return t[r]=e}),t}var window$1=global.window;if(global.tabris&&global.tabris.version)throw new Error("tabris module already loaded. Ensure the module is installed only once.");module.exports=global.tabris=Object.assign(new Tabris,{Action:Action,ActionSheet:ActionSheet,ActivityIndicator:ActivityIndicator,AlertDialog:AlertDialog,App:App,Button:Button,Canvas:Canvas,CheckBox:CheckBox,CollectionView:CollectionView,Composite:Composite,ContentView:ContentView,Crypto:Crypto,DateDialog:DateDialog,Device:Device,Drawer:Drawer,Event:Event,EventObject:EventObject,FileSystem:FileSystem,ImageData:ImageData,ImageView:ImageView,InactivityTimer:InactivityTimer,NativeObject:NativeObject,NavigationView:NavigationView,NavigationBar:NavigationBar,Page:Page,Picker:Picker,Printer:Printer,ProgressBar:ProgressBar,ProgressEvent:ProgressEvent,RadioButton:RadioButton,RefreshComposite:RefreshComposite,ScrollView:ScrollView,SearchAction:SearchAction,Slider:Slider,Storage:Storage,StatusBar:StatusBar,Switch:Switch,Tab:Tab,TabFolder:TabFolder,TextInput:TextInput,TextView:TextView,TimeDialog:TimeDialog,ToggleButton:ToggleButton,Ui:Ui,Video:Video,WebSocket:WebSocket,WebView:WebView,Widget:Widget,WidgetCollection:WidgetCollection,XMLHttpRequest:XMLHttpRequest,fetch:fetch,Headers:Headers,Request:Request,Response:Response}),Object.assign(window$1,{Crypto:Crypto,ImageData:ImageData,ProgressEvent:ProgressEvent,Storage:Storage,WebSocket:WebSocket,XMLHttpRequest:XMLHttpRequest,fetch:fetch,Headers:Headers,Request:Request,Response:Response,JSX:JSX}),tabris.on("start",function(){tabris.app=create$2(),checkVersion(tabris.version,tabris.app._nativeGet("tabrisJsVersion")),tabris.ui=create$3(),tabris.device=create(),tabris.printer=create$1(),tabris.fs=create$8(),publishDeviceProperties(tabris.device,window$1),window$1.localStorage=tabris.localStorage=create$9(),"iOS"===tabris.device.platform&&(window$1.secureStorage=tabris.secureStorage=create$9(!0)),window$1.crypto=tabris.crypto=new Crypto,window$1.console.print&&(window$1.console=createConsole(window$1.console)),tabris.pkcs5=new Pkcs5}),addDOMDocument(window$1),addDOMEventTargetMethods(window$1),addWindowTimerMethods(window$1);